"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[89610],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>g});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var m=a.createContext({}),l=function(e){var t=a.useContext(m),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=l(e.components);return a.createElement(m.Provider,{value:t},e.children)},c="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,m=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=l(n),d=o,g=c["".concat(m,".").concat(d)]||c[d]||h[d]||r;return n?a.createElement(g,i(i({ref:t},p),{},{components:n})):a.createElement(g,i({ref:t},p))}));function g(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=d;var s={};for(var m in t)hasOwnProperty.call(t,m)&&(s[m]=t[m]);s.originalType=e,s[c]="string"==typeof e?e:o,i[1]=s;for(var l=2;l<r;l++)i[l]=n[l];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},63674:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>m,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>l});var a=n(87462),o=(n(67294),n(3905));const r={},i="Figma",s={unversionedId:"integrations/document_loaders/figma",id:"integrations/document_loaders/figma",title:"Figma",description:"Figma is a collaborative web application for interface design.",source:"@site/docs/integrations/document_loaders/figma.md",sourceDirName:"integrations/document_loaders",slug:"/integrations/document_loaders/figma",permalink:"/langchain/docs/integrations/document_loaders/figma",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"integrations",previous:{title:"Fauna",permalink:"/langchain/docs/integrations/document_loaders/fauna"},next:{title:"Geopandas",permalink:"/langchain/docs/integrations/document_loaders/geopandas"}},m={},l=[],p={toc:l},c="wrapper";function h(e){let{components:t,...n}=e;return(0,o.kt)(c,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"figma"},"Figma"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("a",{parentName:"p",href:"https://www.figma.com/"},"Figma")," is a collaborative web application for interface design.")),(0,o.kt)("p",null,"This notebook covers how to load data from the ",(0,o.kt)("inlineCode",{parentName:"p"},"Figma")," REST API into a format that can be ingested into LangChain, along with example usage for code generation."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'\x3c!--IMPORTS:[{"imported": "FigmaFileLoader", "source": "langchain.document_loaders.figma", "docs": "https://api.python.langchain.com/en/latest/document_loaders/langchain.document_loaders.figma.FigmaFileLoader.html", "title": "Figma"}, {"imported": "CharacterTextSplitter", "source": "langchain.text_splitter", "docs": "https://api.python.langchain.com/en/latest/text_splitter/langchain.text_splitter.CharacterTextSplitter.html", "title": "Figma"}, {"imported": "ChatOpenAI", "source": "langchain.chat_models", "docs": "https://api.python.langchain.com/en/latest/chat_models/langchain.chat_models.openai.ChatOpenAI.html", "title": "Figma"}, {"imported": "VectorstoreIndexCreator", "source": "langchain.indexes", "docs": "https://api.python.langchain.com/en/latest/indexes/langchain.indexes.vectorstore.VectorstoreIndexCreator.html", "title": "Figma"}, {"imported": "ConversationChain", "source": "langchain.chains", "docs": "https://api.python.langchain.com/en/latest/chains/langchain.chains.conversation.base.ConversationChain.html", "title": "Figma"}, {"imported": "LLMChain", "source": "langchain.chains", "docs": "https://api.python.langchain.com/en/latest/chains/langchain.chains.llm.LLMChain.html", "title": "Figma"}, {"imported": "ConversationBufferWindowMemory", "source": "langchain.memory", "docs": "https://api.python.langchain.com/en/latest/memory/langchain.memory.buffer_window.ConversationBufferWindowMemory.html", "title": "Figma"}, {"imported": "ChatPromptTemplate", "source": "langchain.prompts.chat", "docs": "https://api.python.langchain.com/en/latest/prompts/langchain.prompts.chat.ChatPromptTemplate.html", "title": "Figma"}, {"imported": "SystemMessagePromptTemplate", "source": "langchain.prompts.chat", "docs": "https://api.python.langchain.com/en/latest/prompts/langchain.prompts.chat.SystemMessagePromptTemplate.html", "title": "Figma"}, {"imported": "AIMessagePromptTemplate", "source": "langchain.prompts.chat", "docs": "https://api.python.langchain.com/en/latest/prompts/langchain.prompts.chat.AIMessagePromptTemplate.html", "title": "Figma"}, {"imported": "HumanMessagePromptTemplate", "source": "langchain.prompts.chat", "docs": "https://api.python.langchain.com/en/latest/prompts/langchain.prompts.chat.HumanMessagePromptTemplate.html", "title": "Figma"}]--\x3e\nimport os\n\n\nfrom langchain.document_loaders.figma import FigmaFileLoader\n\nfrom langchain.text_splitter import CharacterTextSplitter\nfrom langchain.chat_models import ChatOpenAI\nfrom langchain.indexes import VectorstoreIndexCreator\nfrom langchain.chains import ConversationChain, LLMChain\nfrom langchain.memory import ConversationBufferWindowMemory\nfrom langchain.prompts.chat import (\n    ChatPromptTemplate,\n    SystemMessagePromptTemplate,\n    AIMessagePromptTemplate,\n    HumanMessagePromptTemplate,\n)\n')),(0,o.kt)("p",null,"The Figma API Requires an access token, node_ids, and a file key."),(0,o.kt)("p",null,"The file key can be pulled from the URL.  ",(0,o.kt)("a",{parentName:"p",href:"https://www.figma.com/file/%7Bfilekey%7D/sampleFilename"},"https://www.figma.com/file/{filekey}/sampleFilename")),(0,o.kt)("p",null,"Node IDs are also available in the URL. Click on anything and look for the '?node-id={node_id}' param."),(0,o.kt)("p",null,"Access token instructions are in the Figma help center article: ",(0,o.kt)("a",{parentName:"p",href:"https://help.figma.com/hc/en-us/articles/8085703771159-Manage-personal-access-tokens"},"https://help.figma.com/hc/en-us/articles/8085703771159-Manage-personal-access-tokens")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'figma_loader = FigmaFileLoader(\n    os.environ.get("ACCESS_TOKEN"),\n    os.environ.get("NODE_IDS"),\n    os.environ.get("FILE_KEY"),\n)\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"# see https://python.langchain.com/en/latest/modules/data_connection/getting_started.html for more details\nindex = VectorstoreIndexCreator().from_loaders([figma_loader])\nfigma_doc_retriever = index.vectorstore.as_retriever()\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'def generate_code(human_input):\n    # I have no idea if the Jon Carmack thing makes for better code. YMMV.\n    # See https://python.langchain.com/en/latest/modules/models/chat/getting_started.html for chat info\n    system_prompt_template = """You are expert coder Jon Carmack. Use the provided design context to create idomatic HTML/CSS code as possible based on the user request.\n    Everything must be inline in one file and your response must be directly renderable by the browser.\n    Figma file nodes and metadata: {context}"""\n\n    human_prompt_template = "Code the {text}. Ensure it\'s mobile responsive"\n    system_message_prompt = SystemMessagePromptTemplate.from_template(\n        system_prompt_template\n    )\n    human_message_prompt = HumanMessagePromptTemplate.from_template(\n        human_prompt_template\n    )\n    # delete the gpt-4 model_name to use the default gpt-3.5 turbo for faster results\n    gpt_4 = ChatOpenAI(temperature=0.02, model_name="gpt-4")\n    # Use the retriever\'s \'get_relevant_documents\' method if needed to filter down longer docs\n    relevant_nodes = figma_doc_retriever.get_relevant_documents(human_input)\n    conversation = [system_message_prompt, human_message_prompt]\n    chat_prompt = ChatPromptTemplate.from_messages(conversation)\n    response = gpt_4(\n        chat_prompt.format_prompt(\n            context=relevant_nodes, text=human_input\n        ).to_messages()\n    )\n    return response\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'response = generate_code("page top header")\n')),(0,o.kt)("p",null,"Returns the following in ",(0,o.kt)("inlineCode",{parentName:"p"},"response.content"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'<!DOCTYPE html>\\n<html lang="en">\\n<head>\\n    <meta charset="UTF-8">\\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\\n    <style>\\n        @import url(\\\'https://fonts.googleapis.com/css2?family=DM+Sans:wght@500;700&family=Inter:wght@600&display=swap\\\');\\n\\n        body {\\n            margin: 0;\\n            font-family: \\\'DM Sans\\\', sans-serif;\\n        }\\n\\n        .header {\\n            display: flex;\\n            justify-content: space-between;\\n            align-items: center;\\n            padding: 20px;\\n            background-color: #fff;\\n            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\\n        }\\n\\n        .header h1 {\\n            font-size: 16px;\\n            font-weight: 700;\\n            margin: 0;\\n        }\\n\\n        .header nav {\\n            display: flex;\\n            align-items: center;\\n        }\\n\\n        .header nav a {\\n            font-size: 14px;\\n            font-weight: 500;\\n            text-decoration: none;\\n            color: #000;\\n            margin-left: 20px;\\n        }\\n\\n        @media (max-width: 768px) {\\n            .header nav {\\n                display: none;\\n            }\\n        }\\n    </style>\\n</head>\\n<body>\\n    <header class="header">\\n        <h1>Company Contact</h1>\\n        <nav>\\n            <a href="#">Lorem Ipsum</a>\\n            <a href="#">Lorem Ipsum</a>\\n            <a href="#">Lorem Ipsum</a>\\n        </nav>\\n    </header>\\n</body>\\n</html>\n')))}h.isMDXComponent=!0}}]);