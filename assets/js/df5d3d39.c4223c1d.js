"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[71333],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>u});var o=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,o,n=function(e,t){if(null==e)return{};var a,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=o.createContext({}),c=function(e){var t=o.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},p=function(e){var t=c(e.components);return o.createElement(s.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=c(a),h=n,u=d["".concat(s,".").concat(h)]||d[h]||m[h]||r;return a?o.createElement(u,l(l({ref:t},p),{},{components:a})):o.createElement(u,l({ref:t},p))}));function u(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,l=new Array(r);l[0]=h;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[d]="string"==typeof e?e:n,l[1]=i;for(var c=2;c<r;c++)l[c]=a[c];return o.createElement.apply(null,l)}return o.createElement.apply(null,a)}h.displayName="MDXCreateElement"},97934:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>c});var o=a(87462),n=(a(67294),a(3905));const r={},l="GMail",i={unversionedId:"integrations/chat_loaders/gmail",id:"integrations/chat_loaders/gmail",title:"GMail",description:"This loader goes over how to load data from GMail. There are many ways you could want to load data from GMail. This loader is currently fairly opionated in how to do so. The way it does it is it first looks for all messages that you have sent. It then looks for messages where you are responding to a previous email. It then fetches that previous email, and creates a training example of that email, followed by your email.",source:"@site/docs/integrations/chat_loaders/gmail.md",sourceDirName:"integrations/chat_loaders",slug:"/integrations/chat_loaders/gmail",permalink:"/langchain/docs/integrations/chat_loaders/gmail",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"integrations",previous:{title:"Facebook Messenger",permalink:"/langchain/docs/integrations/chat_loaders/facebook"},next:{title:"iMessage",permalink:"/langchain/docs/integrations/chat_loaders/imessage"}},s={},c=[],p=(d="CodeOutputBlock",function(e){return console.warn("Component "+d+" was not imported, exported, or provided by MDXProvider as global scope"),(0,n.kt)("div",e)});var d;const m={toc:c},h="wrapper";function u(e){let{components:t,...a}=e;return(0,n.kt)(h,(0,o.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"gmail"},"GMail"),(0,n.kt)("p",null,"This loader goes over how to load data from GMail. There are many ways you could want to load data from GMail. This loader is currently fairly opionated in how to do so. The way it does it is it first looks for all messages that you have sent. It then looks for messages where you are responding to a previous email. It then fetches that previous email, and creates a training example of that email, followed by your email."),(0,n.kt)("p",null,"Note that there are clear limitations here. For example, all examples created are only looking at the previous email for context."),(0,n.kt)("p",null,"To use:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Set up a Google Developer Account: Go to the Google Developer Console, create a project, and enable the Gmail API for that project. This will give you a credentials.json file that you'll need later.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Install the Google Client Library: Run the following command to install the Google Client Library:"))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"pip install --upgrade google-auth google-auth-oauthlib google-auth-httplib2 google-api-python-client\n")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"import os.path\nimport base64\nimport json\nimport re\nimport time\nfrom google.auth.transport.requests import Request\nfrom google.oauth2.credentials import Credentials\nfrom google_auth_oauthlib.flow import InstalledAppFlow\nfrom googleapiclient.discovery import build\nimport logging\nimport requests\n\nSCOPES = ['https://www.googleapis.com/auth/gmail.readonly']\n\n\ncreds = None\n# The file token.json stores the user's access and refresh tokens, and is\n# created automatically when the authorization flow completes for the first\n# time.\nif os.path.exists('email_token.json'):\n    creds = Credentials.from_authorized_user_file('email_token.json', SCOPES)\n# If there are no (valid) credentials available, let the user log in.\nif not creds or not creds.valid:\n    if creds and creds.expired and creds.refresh_token:\n        creds.refresh(Request())\n    else:\n        flow = InstalledAppFlow.from_client_secrets_file(               \n            # your creds file here. Please create json file as here https://cloud.google.com/docs/authentication/getting-started\n            'creds.json', SCOPES)\n        creds = flow.run_local_server(port=0)\n    # Save the credentials for the next run\n    with open('email_token.json', 'w') as token:\n        token.write(creds.to_json())\n")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},'\x3c!--IMPORTS:[{"imported": "GMailLoader", "source": "langchain.chat_loaders.gmail", "docs": "https://api.python.langchain.com/en/latest/chat_loaders/langchain.chat_loaders.gmail.GMailLoader.html", "title": "GMail"}]--\x3e\nfrom langchain.chat_loaders.gmail import GMailLoader\n')),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"loader = GMailLoader(creds=creds, n=3)\n")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"data = loader.load()\n")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"# Sometimes there can be errors which we silently ignore\nlen(data)\n")),(0,n.kt)(p,{lang:"python",mdxType:"CodeOutputBlock"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"    2\n"))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},'\x3c!--IMPORTS:[{"imported": "map_ai_messages", "source": "langchain.chat_loaders.utils", "docs": "https://api.python.langchain.com/en/latest/chat_loaders/langchain.chat_loaders.utils.map_ai_messages.html", "title": "GMail"}]--\x3e\nfrom langchain.chat_loaders.utils import (\n    map_ai_messages,\n)\n')),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},'# This makes messages sent by hchase@langchain.com the AI Messages\n# This means you will train an LLM to predict as if it\'s responding as hchase\ntraining_data = list(map_ai_messages(data, sender="Harrison Chase <hchase@langchain.com>"))\n')))}u.isMDXComponent=!0}}]);