"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[61837],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>b});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=u(n),d=r,b=p["".concat(s,".").concat(d)]||p[d]||m[d]||o;return n?a.createElement(b,i(i({ref:t},c),{},{components:n})):a.createElement(b,i({ref:t},c))}));function b(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:r,i[1]=l;for(var u=2;u<o;u++)i[u]=n[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},90126:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>m,frontMatter:()=>o,metadata:()=>l,toc:()=>u});var a=n(87462),r=(n(67294),n(3905));const o={},i="Cube Semantic Layer",l={unversionedId:"integrations/document_loaders/cube_semantic",id:"integrations/document_loaders/cube_semantic",title:"Cube Semantic Layer",description:"This notebook demonstrates the process of retrieving Cube's data model metadata in a format suitable for passing to LLMs as embeddings, thereby enhancing contextual information.",source:"@site/docs/integrations/document_loaders/cube_semantic.md",sourceDirName:"integrations/document_loaders",slug:"/integrations/document_loaders/cube_semantic",permalink:"/langchain/docs/integrations/document_loaders/cube_semantic",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"integrations",previous:{title:"CSV",permalink:"/langchain/docs/integrations/document_loaders/csv"},next:{title:"Datadog Logs",permalink:"/langchain/docs/integrations/document_loaders/datadog_logs"}},s={},u=[{value:"About Cube",id:"about-cube",level:3},{value:"Example",id:"example",level:3}],c={toc:u},p="wrapper";function m(e){let{components:t,...n}=e;return(0,r.kt)(p,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"cube-semantic-layer"},"Cube Semantic Layer"),(0,r.kt)("p",null,"This notebook demonstrates the process of retrieving Cube's data model metadata in a format suitable for passing to LLMs as embeddings, thereby enhancing contextual information."),(0,r.kt)("h3",{id:"about-cube"},"About Cube"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://cube.dev/"},"Cube")," is the Semantic Layer for building data apps. It helps data engineers and application developers access data from modern data stores, organize it into consistent definitions, and deliver it to every application."),(0,r.kt)("p",null,"Cube\u2019s data model provides structure and definitions that are used as a context for LLM to understand data and generate correct queries. LLM doesn\u2019t need to navigate complex joins and metrics calculations because Cube abstracts those and provides a simple interface that operates on the business-level terminology, instead of SQL table and column names. This simplification helps LLM to be less error-prone and avoid hallucinations."),(0,r.kt)("h3",{id:"example"},"Example"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Input arguments (mandatory)")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Cube Semantic Loader")," requires 2 arguments:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"cube_api_url"),": The URL of your Cube's deployment REST API. Please refer to the ",(0,r.kt)("a",{parentName:"p",href:"https://cube.dev/docs/http-api/rest#configuration-base-path"},"Cube documentation")," for more information on configuring the base path.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"cube_api_token"),": The authentication token generated based on your Cube's API secret. Please refer to the ",(0,r.kt)("a",{parentName:"p",href:"https://cube.dev/docs/security#generating-json-web-tokens-jwt"},"Cube documentation")," for instructions on generating JSON Web Tokens (JWT)."))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Input arguments (optional)")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"load_dimension_values"),": Whether to load dimension values for every string dimension or not.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"dimension_values_limit"),": Maximum number of dimension values to load.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"dimension_values_max_retries"),": Maximum number of retries to load dimension values.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"dimension_values_retry_delay"),": Delay between retries to load dimension values."))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'\x3c!--IMPORTS:[{"imported": "CubeSemanticLoader", "source": "langchain.document_loaders", "docs": "https://api.python.langchain.com/en/latest/document_loaders/langchain.document_loaders.cube_semantic.CubeSemanticLoader.html", "title": "Cube Semantic Layer"}]--\x3e\nimport jwt\nfrom langchain.document_loaders import CubeSemanticLoader\n\napi_url = "https://api-example.gcp-us-central1.cubecloudapp.dev/cubejs-api/v1/meta"\ncubejs_api_secret = "api-secret-here"\nsecurity_context = {}\n# Read more about security context here: https://cube.dev/docs/security\napi_token = jwt.encode(security_context, cubejs_api_secret, algorithm="HS256")\n\nloader = CubeSemanticLoader(api_url, api_token)\n\ndocuments = loader.load()\n')),(0,r.kt)("p",null,"Returns a list of documents with the following attributes:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"page_content")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"metadata"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"table_name")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"column_name")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"column_data_type")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"column_title")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"column_description")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"column_values")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"cube_data_obj_type"))))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# Given string containing page content\npage_content = 'Users View City, None'\n\n# Given dictionary containing metadata\nmetadata = {\n    'table_name': 'users_view',\n    'column_name': 'users_view.city',\n    'column_data_type': 'string',\n    'column_title': 'Users View City',\n    'column_description': 'None',\n    'column_member_type': 'dimension',\n    'column_values': [\n        'Austin',\n        'Chicago',\n        'Los Angeles',\n        'Mountain View',\n        'New York',\n        'Palo Alto',\n        'San Francisco',\n        'Seattle'\n    ],\n    'cube_data_obj_type': 'view'\n}\n")))}m.isMDXComponent=!0}}]);