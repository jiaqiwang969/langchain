"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[90275],{3905:(e,n,a)=>{a.d(n,{Zo:()=>p,kt:()=>g});var t=a(67294);function o(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function i(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function l(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?i(Object(a),!0).forEach((function(n){o(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function r(e,n){if(null==e)return{};var a,t,o=function(e,n){if(null==e)return{};var a,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||(o[a]=e[a]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var s=t.createContext({}),c=function(e){var n=t.useContext(s),a=n;return e&&(a="function"==typeof e?e(n):l(l({},n),e)),a},p=function(e){var n=c(e.components);return t.createElement(s.Provider,{value:n},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},d=t.forwardRef((function(e,n){var a=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,p=r(e,["components","mdxType","originalType","parentName"]),u=c(a),d=o,g=u["".concat(s,".").concat(d)]||u[d]||m[d]||i;return a?t.createElement(g,l(l({ref:n},p),{},{components:a})):t.createElement(g,l({ref:n},p))}));function g(e,n){var a=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var i=a.length,l=new Array(i);l[0]=d;var r={};for(var s in n)hasOwnProperty.call(n,s)&&(r[s]=n[s]);r.originalType=e,r[u]="string"==typeof e?e:o,l[1]=r;for(var c=2;c<i;c++)l[c]=a[c];return t.createElement.apply(null,l)}return t.createElement.apply(null,a)}d.displayName="MDXCreateElement"},39763:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>g,frontMatter:()=>i,metadata:()=>r,toc:()=>c});var t=a(87462),o=(a(67294),a(3905));const i={},l="Removing logical fallacies from model output",r={unversionedId:"guides/safety/logical_fallacy_chain",id:"guides/safety/logical_fallacy_chain",title:"Removing logical fallacies from model output",description:"Logical fallacies are flawed reasoning or false arguments that can undermine the validity of a model's outputs. Examples include circular reasoning, false",source:"@site/docs/guides/safety/logical_fallacy_chain.mdx",sourceDirName:"guides/safety",slug:"/guides/safety/logical_fallacy_chain",permalink:"/langchain/docs/guides/safety/logical_fallacy_chain",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Self-critique chain with constitutional AI",permalink:"/langchain/docs/guides/safety/constitutional_chain"},next:{title:"Moderation",permalink:"/langchain/docs/guides/safety/moderation"}},s={},c=[],p=(u="CodeOutputBlock",function(e){return console.warn("Component "+u+" was not imported, exported, or provided by MDXProvider as global scope"),(0,o.kt)("div",e)});var u;const m={toc:c},d="wrapper";function g(e){let{components:n,...a}=e;return(0,o.kt)(d,(0,t.Z)({},m,a,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"removing-logical-fallacies-from-model-output"},"Removing logical fallacies from model output"),(0,o.kt)("p",null,"Logical fallacies are flawed reasoning or false arguments that can undermine the validity of a model's outputs. Examples include circular reasoning, false\ndichotomies, ad hominem attacks, etc.  Machine learning models are optimized to perform well on specific metrics like accuracy, perplexity, or loss. However,\noptimizing for metrics alone does not guarantee logically sound reasoning."),(0,o.kt)("p",null,"Language models can learn to exploit flaws in reasoning to generate plausible-sounding but logically invalid arguments.  When models rely on fallacies, their outputs become unreliable and untrustworthy, even if they achieve high scores on metrics. Users cannot depend on such outputs. Propagating logical fallacies can spread misinformation, confuse users, and lead to harmful real-world consequences when models are deployed in products or services."),(0,o.kt)("p",null,"Monitoring and testing specifically for logical flaws is challenging unlike other quality issues. It requires reasoning about arguments rather than pattern matching."),(0,o.kt)("p",null,"Therefore, it is crucial that model developers proactively address logical fallacies after optimizing metrics. Specialized techniques like causal modeling, robustness testing, and bias mitigation can help avoid flawed reasoning.  Overall, allowing logical flaws to persist makes models less safe and ethical. Eliminating fallacies ensures model outputs remain logically valid and aligned with human reasoning. This maintains user trust and mitigates risks."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'\x3c!--IMPORTS:[{"imported": "OpenAI", "source": "langchain.llms", "docs": "https://api.python.langchain.com/en/latest/llms/langchain.llms.openai.OpenAI.html", "title": "Removing logical fallacies from model output"}, {"imported": "PromptTemplate", "source": "langchain.prompts", "docs": "https://api.python.langchain.com/en/latest/prompts/langchain.prompts.prompt.PromptTemplate.html", "title": "Removing logical fallacies from model output"}, {"imported": "LLMChain", "source": "langchain.chains.llm", "docs": "https://api.python.langchain.com/en/latest/chains/langchain.chains.llm.LLMChain.html", "title": "Removing logical fallacies from model output"}]--\x3e\n# Imports\nfrom langchain.llms import OpenAI\nfrom langchain.prompts import PromptTemplate\nfrom langchain.chains.llm import LLMChain\nfrom langchain_experimental.fallacy_removal.base import FallacyChain\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'# Example of a model output being returned with a logical fallacy\nmisleading_prompt = PromptTemplate(\n    template="""You have to respond by using only logical fallacies inherent in your answer explanations.\n\nQuestion: {question}\n\nBad answer:""",\n    input_variables=["question"],\n)\n\nllm = OpenAI(temperature=0)\n\nmisleading_chain = LLMChain(llm=llm, prompt=misleading_prompt)\n\nmisleading_chain.run(question="How do I know the earth is round?")\n')),(0,o.kt)(p,{lang:"python",mdxType:"CodeOutputBlock"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"    'The earth is round because my professor said it is, and everyone believes my professor'\n"))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'fallacies = FallacyChain.get_fallacies(["correction"])\nfallacy_chain = FallacyChain.from_llm(\n    chain=misleading_chain,\n    logical_fallacies=fallacies,\n    llm=llm,\n    verbose=True,\n)\n\nfallacy_chain.run(question="How do I know the earth is round?")\n')),(0,o.kt)(p,{lang:"python",mdxType:"CodeOutputBlock"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\n\n    > Entering new FallacyChain chain...\n    Initial response:  The earth is round because my professor said it is, and everyone believes my professor.\n\n    Applying correction...\n\n    Fallacy Critique: The model's response uses an appeal to authority and ad populum (everyone believes the professor). Fallacy Critique Needed.\n\n    Updated response: You can find evidence of a round earth due to empirical evidence like photos from space, observations of ships disappearing over the horizon, seeing the curved shadow on the moon, or the ability to circumnavigate the globe.\n\n\n    > Finished chain.\n\n\n\n\n\n    'You can find evidence of a round earth due to empirical evidence like photos from space, observations of ships disappearing over the horizon, seeing the curved shadow on the moon, or the ability to circumnavigate the globe.'\n"))))}g.isMDXComponent=!0}}]);