"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[13117],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var i=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=i.createContext({}),c=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=c(e.components);return i.createElement(l.Provider,{value:t},e.children)},u="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},d=i.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(n),d=o,m=u["".concat(l,".").concat(d)]||u[d]||g[d]||a;return n?i.createElement(m,r(r({ref:t},p),{},{components:n})):i.createElement(m,r({ref:t},p))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,r=new Array(a);r[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:o,r[1]=s;for(var c=2;c<a;c++)r[c]=n[c];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}d.displayName="MDXCreateElement"},32182:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>m,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var i=n(87462),o=(n(67294),n(3905));const a={},r="Azure Cognitive Services",s={unversionedId:"integrations/toolkits/azure_cognitive_services",id:"integrations/toolkits/azure_cognitive_services",title:"Azure Cognitive Services",description:"This toolkit is used to interact with the Azure Cognitive Services API to achieve some multimodal capabilities.",source:"@site/docs/integrations/toolkits/azure_cognitive_services.md",sourceDirName:"integrations/toolkits",slug:"/integrations/toolkits/azure_cognitive_services",permalink:"/langchain/docs/integrations/toolkits/azure_cognitive_services",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"integrations",previous:{title:"Amadeus",permalink:"/langchain/docs/integrations/toolkits/amadeus"},next:{title:"CSV",permalink:"/langchain/docs/integrations/toolkits/csv"}},l={},c=[{value:"Create the Toolkit",id:"create-the-toolkit",level:2},{value:"Use within an Agent",id:"use-within-an-agent",level:2}],p=(u="CodeOutputBlock",function(e){return console.warn("Component "+u+" was not imported, exported, or provided by MDXProvider as global scope"),(0,o.kt)("div",e)});var u;const g={toc:c},d="wrapper";function m(e){let{components:t,...n}=e;return(0,o.kt)(d,(0,i.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"azure-cognitive-services"},"Azure Cognitive Services"),(0,o.kt)("p",null,"This toolkit is used to interact with the ",(0,o.kt)("inlineCode",{parentName:"p"},"Azure Cognitive Services API")," to achieve some multimodal capabilities."),(0,o.kt)("p",null,"Currently There are four tools bundled in this toolkit:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"AzureCogsImageAnalysisTool: used to extract caption, objects, tags, and text from images. (Note: this tool is not available on Mac OS yet, due to the dependency on ",(0,o.kt)("inlineCode",{parentName:"li"},"azure-ai-vision")," package, which is only supported on Windows and Linux currently.)"),(0,o.kt)("li",{parentName:"ul"},"AzureCogsFormRecognizerTool: used to extract text, tables, and key-value pairs from documents."),(0,o.kt)("li",{parentName:"ul"},"AzureCogsSpeech2TextTool: used to transcribe speech to text."),(0,o.kt)("li",{parentName:"ul"},"AzureCogsText2SpeechTool: used to synthesize text to speech.")),(0,o.kt)("p",null,"First, you need to set up an Azure account and create a Cognitive Services resource. You can follow the instructions ",(0,o.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/azure/cognitive-services/cognitive-services-apis-create-account?tabs=multiservice%2Cwindows"},"here")," to create a resource. "),(0,o.kt)("p",null,'Then, you need to get the endpoint, key and region of your resource, and set them as environment variables. You can find them in the "Keys and Endpoint" page of your resource.'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"# !pip install --upgrade azure-ai-formrecognizer > /dev/null\n# !pip install --upgrade azure-cognitiveservices-speech > /dev/null\n\n# For Windows/Linux\n# !pip install --upgrade azure-ai-vision > /dev/null\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'import os\n\nos.environ["OPENAI_API_KEY"] = "sk-"\nos.environ["AZURE_COGS_KEY"] = ""\nos.environ["AZURE_COGS_ENDPOINT"] = ""\nos.environ["AZURE_COGS_REGION"] = ""\n')),(0,o.kt)("h2",{id:"create-the-toolkit"},"Create the Toolkit"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'\x3c!--IMPORTS:[{"imported": "AzureCognitiveServicesToolkit", "source": "langchain.agents.agent_toolkits", "docs": "https://api.python.langchain.com/en/latest/agents/langchain.agents.agent_toolkits.azure_cognitive_services.AzureCognitiveServicesToolkit.html", "title": "Azure Cognitive Services"}]--\x3e\nfrom langchain.agents.agent_toolkits import AzureCognitiveServicesToolkit\n\ntoolkit = AzureCognitiveServicesToolkit()\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"[tool.name for tool in toolkit.get_tools()]\n")),(0,o.kt)(p,{lang:"python",mdxType:"CodeOutputBlock"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"    ['Azure Cognitive Services Image Analysis',\n     'Azure Cognitive Services Form Recognizer',\n     'Azure Cognitive Services Speech2Text',\n     'Azure Cognitive Services Text2Speech']\n"))),(0,o.kt)("h2",{id:"use-within-an-agent"},"Use within an Agent"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'\x3c!--IMPORTS:[{"imported": "initialize_agent", "source": "langchain.agents", "docs": "https://api.python.langchain.com/en/latest/agents/langchain.agents.initialize.initialize_agent.html", "title": "Azure Cognitive Services"}, {"imported": "AgentType", "source": "langchain.agents", "docs": "https://api.python.langchain.com/en/latest/agents/langchain.agents.agent_types.AgentType.html", "title": "Azure Cognitive Services"}]--\x3e\nfrom langchain import OpenAI\nfrom langchain.agents import initialize_agent, AgentType\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"llm = OpenAI(temperature=0)\nagent = initialize_agent(\n    tools=toolkit.get_tools(),\n    llm=llm,\n    agent=AgentType.STRUCTURED_CHAT_ZERO_SHOT_REACT_DESCRIPTION,\n    verbose=True,\n)\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'agent.run(\n    "What can I make with these ingredients?"\n    "https://images.openai.com/blob/9ad5a2ab-041f-475f-ad6a-b51899c50182/ingredients.png"\n)\n')),(0,o.kt)(p,{lang:"python",mdxType:"CodeOutputBlock"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'    \n    \n    > Entering new AgentExecutor chain...\n    \n    Action:\n    ```\n    {\n      "action": "Azure Cognitive Services Image Analysis",\n      "action_input": "https://images.openai.com/blob/9ad5a2ab-041f-475f-ad6a-b51899c50182/ingredients.png"\n    }\n    ```\n    \n    \n    Observation: Caption: a group of eggs and flour in bowls\n    Objects: Egg, Egg, Food\n    Tags: dairy, ingredient, indoor, thickening agent, food, mixing bowl, powder, flour, egg, bowl\n    Thought: I can use the objects and tags to suggest recipes\n    Action:\n    ```\n    {\n      "action": "Final Answer",\n      "action_input": "You can make pancakes, omelettes, or quiches with these ingredients!"\n    }\n    ```\n    \n    > Finished chain.\n\n\n\n\n\n    \'You can make pancakes, omelettes, or quiches with these ingredients!\'\n'))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'audio_file = agent.run("Tell me a joke and read it out for me.")\n')),(0,o.kt)(p,{lang:"python",mdxType:"CodeOutputBlock"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'    \n    \n    > Entering new AgentExecutor chain...\n    Action:\n    ```\n    {\n      "action": "Azure Cognitive Services Text2Speech",\n      "action_input": "Why did the chicken cross the playground? To get to the other slide!"\n    }\n    ```\n    \n    \n    Observation: /tmp/tmpa3uu_j6b.wav\n    Thought: I have the audio file of the joke\n    Action:\n    ```\n    {\n      "action": "Final Answer",\n      "action_input": "/tmp/tmpa3uu_j6b.wav"\n    }\n    ```\n    \n    > Finished chain.\n\n\n\n\n\n    \'/tmp/tmpa3uu_j6b.wav\'\n'))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"from IPython import display\n\naudio = display.Audio(audio_file)\ndisplay.display(audio)\n")))}m.isMDXComponent=!0}}]);