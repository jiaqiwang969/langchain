"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[83167],{3905:(e,t,n)=>{n.d(t,{Zo:()=>g,kt:()=>m});var o=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},l=Object.keys(e);for(o=0;o<l.length;o++)n=l[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)n=l[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=o.createContext({}),s=function(e){var t=o.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},g=function(e){var t=s(e.components);return o.createElement(p.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,p=e.parentName,g=r(e,["components","mdxType","originalType","parentName"]),c=s(n),d=a,m=c["".concat(p,".").concat(d)]||c[d]||u[d]||l;return n?o.createElement(m,i(i({ref:t},g),{},{components:n})):o.createElement(m,i({ref:t},g))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,i=new Array(l);i[0]=d;var r={};for(var p in t)hasOwnProperty.call(t,p)&&(r[p]=t[p]);r.originalType=e,r[c]="string"==typeof e?e:a,i[1]=r;for(var s=2;s<l;s++)i[s]=n[s];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},50547:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>u,frontMatter:()=>l,metadata:()=>r,toc:()=>s});var o=n(87462),a=(n(67294),n(3905));const l={},i="Google Drive",r={unversionedId:"integrations/tools/google_drive",id:"integrations/tools/google_drive",title:"Google Drive",description:"This notebook walks through connecting a LangChain to the Google Drive API.",source:"@site/docs/integrations/tools/google_drive.md",sourceDirName:"integrations/tools",slug:"/integrations/tools/google_drive",permalink:"/langchain/docs/integrations/tools/google_drive",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"integrations",previous:{title:"Golden Query",permalink:"/langchain/docs/integrations/tools/golden_query"},next:{title:"Google Places",permalink:"/langchain/docs/integrations/tools/google_places"}},p={},s=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Instructions for retrieving your Google Docs data",id:"instructions-for-retrieving-your-google-docs-data",level:2},{value:"Use within an Agent",id:"use-within-an-agent",level:2}],g={toc:s},c="wrapper";function u(e){let{components:t,...n}=e;return(0,a.kt)(c,(0,o.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"google-drive"},"Google Drive"),(0,a.kt)("p",null,"This notebook walks through connecting a LangChain to the ",(0,a.kt)("inlineCode",{parentName:"p"},"Google Drive API"),"."),(0,a.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Create a Google Cloud project or use an existing project"),(0,a.kt)("li",{parentName:"ol"},"Enable the ",(0,a.kt)("a",{parentName:"li",href:"https://console.cloud.google.com/flows/enableapi?apiid=drive.googleapis.com"},"Google Drive API")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"https://developers.google.com/drive/api/quickstart/python#authorize_credentials_for_a_desktop_application"},"Authorize credentials for desktop app")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"pip install --upgrade google-api-python-client google-auth-httplib2 google-auth-oauthlib"))),(0,a.kt)("h2",{id:"instructions-for-retrieving-your-google-docs-data"},"Instructions for retrieving your Google Docs data"),(0,a.kt)("p",null,"By default, the ",(0,a.kt)("inlineCode",{parentName:"p"},"GoogleDriveTools")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"GoogleDriveWrapper")," expects the ",(0,a.kt)("inlineCode",{parentName:"p"},"credentials.json")," file to be ",(0,a.kt)("inlineCode",{parentName:"p"},"~/.credentials/credentials.json"),", but this is configurable using the ",(0,a.kt)("inlineCode",{parentName:"p"},"GOOGLE_ACCOUNT_FILE")," environment variable.\nThe location of ",(0,a.kt)("inlineCode",{parentName:"p"},"token.json")," use the same directory (or use the parameter ",(0,a.kt)("inlineCode",{parentName:"p"},"token_path"),"). Note that ",(0,a.kt)("inlineCode",{parentName:"p"},"token.json")," will be created automatically the first time you use the tool."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"GoogleDriveSearchTool")," can retrieve a selection of files with some requests. "),(0,a.kt)("p",null,"By default, If you use a ",(0,a.kt)("inlineCode",{parentName:"p"},"folder_id"),", all the files inside this folder can be retrieved to ",(0,a.kt)("inlineCode",{parentName:"p"},"Document"),", if the name match the query."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"#!pip install --upgrade google-api-python-client google-auth-httplib2 google-auth-oauthlib\n")),(0,a.kt)("p",null,"You can obtain your folder and document id from the URL:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Folder: ",(0,a.kt)("a",{parentName:"li",href:"https://drive.google.com/drive/u/0/folders/1yucgL9WGgWZdM1TOuKkeghlPizuzMYb5"},"https://drive.google.com/drive/u/0/folders/1yucgL9WGgWZdM1TOuKkeghlPizuzMYb5")," -> folder id is ",(0,a.kt)("inlineCode",{parentName:"li"},'"1yucgL9WGgWZdM1TOuKkeghlPizuzMYb5"')),(0,a.kt)("li",{parentName:"ul"},"Document: ",(0,a.kt)("a",{parentName:"li",href:"https://docs.google.com/document/d/1bfaMQ18_i56204VaQDVeAFpqEijJTgvurupdEDiaUQw/edit"},"https://docs.google.com/document/d/1bfaMQ18_i56204VaQDVeAFpqEijJTgvurupdEDiaUQw/edit")," -> document id is ",(0,a.kt)("inlineCode",{parentName:"li"},'"1bfaMQ18_i56204VaQDVeAFpqEijJTgvurupdEDiaUQw"'))),(0,a.kt)("p",null,"The special value ",(0,a.kt)("inlineCode",{parentName:"p"},"root")," is for your personal home."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"folder_id=\"root\"\n#folder_id='1yucgL9WGgWZdM1TOuKkeghlPizuzMYb5'\n")),(0,a.kt)("p",null,"By default, all files with these mime-type can be converted to ",(0,a.kt)("inlineCode",{parentName:"p"},"Document"),"."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"text/text"),(0,a.kt)("li",{parentName:"ul"},"text/plain"),(0,a.kt)("li",{parentName:"ul"},"text/html"),(0,a.kt)("li",{parentName:"ul"},"text/csv"),(0,a.kt)("li",{parentName:"ul"},"text/markdown"),(0,a.kt)("li",{parentName:"ul"},"image/png"),(0,a.kt)("li",{parentName:"ul"},"image/jpeg"),(0,a.kt)("li",{parentName:"ul"},"application/epub+zip"),(0,a.kt)("li",{parentName:"ul"},"application/pdf"),(0,a.kt)("li",{parentName:"ul"},"application/rtf"),(0,a.kt)("li",{parentName:"ul"},"application/vnd.google-apps.document (GDoc)"),(0,a.kt)("li",{parentName:"ul"},"application/vnd.google-apps.presentation (GSlide)"),(0,a.kt)("li",{parentName:"ul"},"application/vnd.google-apps.spreadsheet (GSheet)"),(0,a.kt)("li",{parentName:"ul"},"application/vnd.google.colaboratory (Notebook colab)"),(0,a.kt)("li",{parentName:"ul"},"application/vnd.openxmlformats-officedocument.presentationml.presentation (PPTX)"),(0,a.kt)("li",{parentName:"ul"},"application/vnd.openxmlformats-officedocument.wordprocessingml.document (DOCX)")),(0,a.kt)("p",null,"It's possible to update or customize this. See the documentation of ",(0,a.kt)("inlineCode",{parentName:"p"},"GoogleDriveAPIWrapper"),"."),(0,a.kt)("p",null,"But, the corresponding packages must installed."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"#!pip install unstructured\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},'from langchain.utilities.google_drive import GoogleDriveAPIWrapper\nfrom langchain.tools.google_drive.tool import GoogleDriveSearchTool\n\n# By default, search only in the filename.\ntool = GoogleDriveSearchTool(\n    api_wrapper=GoogleDriveAPIWrapper(\n        folder_id=folder_id,\n        num_results=2,\n        template="gdrive-query-in-folder", # Search in the body of documents\n    )\n)\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"import logging\nlogging.basicConfig(level=logging.INFO)\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},'tool.run("machine learning")\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"tool.description\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},'\x3c!--IMPORTS:[{"imported": "load_tools", "source": "langchain.agents", "docs": "https://api.python.langchain.com/en/latest/agents/langchain.agents.load_tools.load_tools.html", "title": "Google Drive"}]--\x3e\nfrom langchain.agents import load_tools\ntools = load_tools(["google-drive-search"],\n                   folder_id=folder_id,\n                   template="gdrive-query-in-folder",\n                  )\n')),(0,a.kt)("h2",{id:"use-within-an-agent"},"Use within an Agent"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},'\x3c!--IMPORTS:[{"imported": "initialize_agent", "source": "langchain.agents", "docs": "https://api.python.langchain.com/en/latest/agents/langchain.agents.initialize.initialize_agent.html", "title": "Google Drive"}, {"imported": "AgentType", "source": "langchain.agents", "docs": "https://api.python.langchain.com/en/latest/agents/langchain.agents.agent_types.AgentType.html", "title": "Google Drive"}]--\x3e\nfrom langchain import OpenAI\nfrom langchain.agents import initialize_agent, AgentType\nllm = OpenAI(temperature=0)\nagent = initialize_agent(\n    tools=tools,\n    llm=llm,\n    agent=AgentType.STRUCTURED_CHAT_ZERO_SHOT_REACT_DESCRIPTION,\n)\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"agent.run(\n    \"Search in google drive, who is 'Yann LeCun' ?\"\n)\n")))}u.isMDXComponent=!0}}]);