"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8208],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>d});var o=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,o,a=function(e,n){if(null==e)return{};var t,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=o.createContext({}),c=function(e){var n=o.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},p=function(e){var n=c(e.components);return o.createElement(s.Provider,{value:n},e.children)},u="mdxType",h={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},m=o.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(t),m=a,d=u["".concat(s,".").concat(m)]||u[m]||h[m]||r;return t?o.createElement(d,i(i({ref:n},p),{},{components:t})):o.createElement(d,i({ref:n},p))}));function d(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,i=new Array(r);i[0]=m;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[u]="string"==typeof e?e:a,i[1]=l;for(var c=2;c<r;c++)i[c]=t[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,t)}m.displayName="MDXCreateElement"},30563:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>f,contentTitle:()=>y,default:()=>b,frontMatter:()=>d,metadata:()=>g,toc:()=>k});var o=t(87462),a=(t(67294),t(3905));const r=(i="CodeOutputBlock",function(e){return console.warn("Component "+i+" was not imported, exported, or provided by MDXProvider as global scope"),(0,a.kt)("div",e)});var i;const l={toc:[]},s="wrapper";function c(e){let{components:n,...t}=e;return(0,a.kt)(s,(0,o.Z)({},l,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"This is accomplished with a specific type of agent (",(0,a.kt)("inlineCode",{parentName:"p"},"conversational-react-description"),") which expects to be used with a memory component."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"from langchain.agents import Tool\nfrom langchain.agents import AgentType\nfrom langchain.memory import ConversationBufferMemory\nfrom langchain import OpenAI\nfrom langchain.utilities import SerpAPIWrapper\nfrom langchain.agents import initialize_agent\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},'search = SerpAPIWrapper()\ntools = [\n    Tool(\n        name = "Current Search",\n        func=search.run,\n        description="useful for when you need to answer questions about current events or the current state of the world"\n    ),\n]\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},'memory = ConversationBufferMemory(memory_key="chat_history")\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"llm=OpenAI(temperature=0)\nagent_chain = initialize_agent(tools, llm, agent=AgentType.CONVERSATIONAL_REACT_DESCRIPTION, verbose=True, memory=memory)\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},'agent_chain.run(input="hi, i am bob")\n')),(0,a.kt)(r,{lang:"python",mdxType:"CodeOutputBlock"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"    > Entering new AgentExecutor chain...\n    \n    Thought: Do I need to use a tool? No\n    AI: Hi Bob, nice to meet you! How can I help you today?\n    \n    > Finished chain.\n\n\n    'Hi Bob, nice to meet you! How can I help you today?'\n"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},'agent_chain.run(input="what\'s my name?")\n')),(0,a.kt)(r,{lang:"python",mdxType:"CodeOutputBlock"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"    > Entering new AgentExecutor chain...\n    \n    Thought: Do I need to use a tool? No\n    AI: Your name is Bob!\n    \n    > Finished chain.\n\n\n    'Your name is Bob!'\n"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},'agent_chain.run("what are some good dinners to make this week, if i like thai food?")\n')),(0,a.kt)(r,{lang:"python",mdxType:"CodeOutputBlock"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"    > Entering new AgentExecutor chain...\n    \n    Thought: Do I need to use a tool? Yes\n    Action: Current Search\n    Action Input: Thai food dinner recipes\n    Observation: 59 easy Thai recipes for any night of the week \xb7 Marion Grasby's Thai spicy chilli and basil fried rice \xb7 Thai curry noodle soup \xb7 Marion Grasby's Thai Spicy ...\n    Thought: Do I need to use a tool? No\n    AI: Here are some great Thai dinner recipes you can try this week: Marion Grasby's Thai Spicy Chilli and Basil Fried Rice, Thai Curry Noodle Soup, Thai Green Curry with Coconut Rice, Thai Red Curry with Vegetables, and Thai Coconut Soup. I hope you enjoy them!\n    \n    > Finished chain.\n\n\n    \"Here are some great Thai dinner recipes you can try this week: Marion Grasby's Thai Spicy Chilli and Basil Fried Rice, Thai Curry Noodle Soup, Thai Green Curry with Coconut Rice, Thai Red Curry with Vegetables, and Thai Coconut Soup. I hope you enjoy them!\"\n"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},'agent_chain.run(input="tell me the last letter in my name, and also tell me who won the world cup in 1978?")\n')),(0,a.kt)(r,{lang:"python",mdxType:"CodeOutputBlock"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'    > Entering new AgentExecutor chain...\n    \n    Thought: Do I need to use a tool? Yes\n    Action: Current Search\n    Action Input: Who won the World Cup in 1978\n    Observation: Argentina national football team\n    Thought: Do I need to use a tool? No\n    AI: The last letter in your name is "b" and the winner of the 1978 World Cup was the Argentina national football team.\n    \n    > Finished chain.\n\n\n    \'The last letter in your name is "b" and the winner of the 1978 World Cup was the Argentina national football team.\'\n'))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},'agent_chain.run(input="whats the current temperature in pomfret?")\n')),(0,a.kt)(r,{lang:"python",mdxType:"CodeOutputBlock"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"    > Entering new AgentExecutor chain...\n    \n    Thought: Do I need to use a tool? Yes\n    Action: Current Search\n    Action Input: Current temperature in Pomfret\n    Observation: Partly cloudy skies. High around 70F. Winds W at 5 to 10 mph. Humidity41%.\n    Thought: Do I need to use a tool? No\n    AI: The current temperature in Pomfret is around 70F with partly cloudy skies and winds W at 5 to 10 mph. The humidity is 41%.\n    \n    > Finished chain.\n\n\n    'The current temperature in Pomfret is around 70F with partly cloudy skies and winds W at 5 to 10 mph. The humidity is 41%.'\n"))))}c.isMDXComponent=!0;const p=(e=>function(n){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,a.kt)("div",n)})("CodeOutputBlock"),u={toc:[]},h="wrapper";function m(e){let{components:n,...t}=e;return(0,a.kt)(h,(0,o.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"chat-conversational-react-description")," agent type lets us create a conversational agent using a chat model instead of an LLM."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},'from langchain.memory import ConversationBufferMemory\nfrom langchain.chat_models import ChatOpenAI\n\nmemory = ConversationBufferMemory(memory_key="chat_history", return_messages=True)\nllm = ChatOpenAI(openai_api_key=OPENAI_API_KEY, temperature=0)\nagent_chain = initialize_agent(tools, llm, agent=AgentType.CHAT_CONVERSATIONAL_REACT_DESCRIPTION, verbose=True, memory=memory)\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},'agent_chain.run(input="hi, i am bob")\n')),(0,a.kt)(p,{lang:"python",mdxType:"CodeOutputBlock"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'    > Entering new AgentExecutor chain...\n    {\n        "action": "Final Answer",\n        "action_input": "Hello Bob! How can I assist you today?"\n    }\n    \n    > Finished chain.\n\n\n    \'Hello Bob! How can I assist you today?\'\n'))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},'agent_chain.run(input="what\'s my name?")\n')),(0,a.kt)(p,{lang:"python",mdxType:"CodeOutputBlock"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'    > Entering new AgentExecutor chain...\n    {\n        "action": "Final Answer",\n        "action_input": "Your name is Bob."\n    }\n    \n    > Finished chain.\n\n\n    \'Your name is Bob.\'\n'))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},'agent_chain.run("what are some good dinners to make this week, if i like thai food?")\n')),(0,a.kt)(p,{lang:"python",mdxType:"CodeOutputBlock"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'    > Entering new AgentExecutor chain...\n    {\n        "action": "Current Search",\n        "action_input": "Thai food dinner recipes"\n    }\n    Observation: 64 easy Thai recipes for any night of the week \xb7 Thai curry noodle soup \xb7 Thai yellow cauliflower, snake bean and tofu curry \xb7 Thai-spiced chicken hand pies \xb7 Thai ...\n    Thought:{\n        "action": "Final Answer",\n        "action_input": "Here are some Thai food dinner recipes you can try this week: Thai curry noodle soup, Thai yellow cauliflower, snake bean and tofu curry, Thai-spiced chicken hand pies, and many more. You can find the full list of recipes at the source I found earlier."\n    }\n    \n    > Finished chain.\n\n\n    \'Here are some Thai food dinner recipes you can try this week: Thai curry noodle soup, Thai yellow cauliflower, snake bean and tofu curry, Thai-spiced chicken hand pies, and many more. You can find the full list of recipes at the source I found earlier.\'\n'))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},'agent_chain.run(input="tell me the last letter in my name, and also tell me who won the world cup in 1978?")\n')),(0,a.kt)(p,{lang:"python",mdxType:"CodeOutputBlock"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'    > Entering new AgentExecutor chain...\n    {\n        "action": "Final Answer",\n        "action_input": "The last letter in your name is \'b\'. Argentina won the World Cup in 1978."\n    }\n    \n    > Finished chain.\n\n\n    "The last letter in your name is \'b\'. Argentina won the World Cup in 1978."\n'))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},'agent_chain.run(input="whats the weather like in pomfret?")\n')),(0,a.kt)(p,{lang:"python",mdxType:"CodeOutputBlock"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'    > Entering new AgentExecutor chain...\n    {\n        "action": "Current Search",\n        "action_input": "weather in pomfret"\n    }\n    Observation: Cloudy with showers. Low around 55F. Winds S at 5 to 10 mph. Chance of rain 60%. Humidity76%.\n    Thought:{\n        "action": "Final Answer",\n        "action_input": "Cloudy with showers. Low around 55F. Winds S at 5 to 10 mph. Chance of rain 60%. Humidity76%."\n    }\n    \n    > Finished chain.\n\n\n    \'Cloudy with showers. Low around 55F. Winds S at 5 to 10 mph. Chance of rain 60%. Humidity76%.\'\n'))))}m.isMDXComponent=!0;const d={},y="Conversational",g={unversionedId:"modules/agents/agent_types/chat_conversation_agent",id:"modules/agents/agent_types/chat_conversation_agent",title:"Conversational",description:"This walkthrough demonstrates how to use an agent optimized for conversation. Other agents are often optimized for using tools to figure out the best response, which is not ideal in a conversational setting where you may want the agent to be able to chat with the user as well.",source:"@site/docs/modules/agents/agent_types/chat_conversation_agent.mdx",sourceDirName:"modules/agents/agent_types",slug:"/modules/agents/agent_types/chat_conversation_agent",permalink:"/langchain/docs/modules/agents/agent_types/chat_conversation_agent",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Agent types",permalink:"/langchain/docs/modules/agents/agent_types/"},next:{title:"OpenAI functions",permalink:"/langchain/docs/modules/agents/agent_types/openai_functions_agent"}},f={},k=[{value:"Using a chat model",id:"using-a-chat-model",level:2}],w={toc:k},T="wrapper";function b(e){let{components:n,...t}=e;return(0,a.kt)(T,(0,o.Z)({},w,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"conversational"},"Conversational"),(0,a.kt)("p",null,"This walkthrough demonstrates how to use an agent optimized for conversation. Other agents are often optimized for using tools to figure out the best response, which is not ideal in a conversational setting where you may want the agent to be able to chat with the user as well."),(0,a.kt)(c,{mdxType:"Example"}),(0,a.kt)("h2",{id:"using-a-chat-model"},"Using a chat model"),(0,a.kt)(m,{mdxType:"ChatExample"}))}b.isMDXComponent=!0}}]);