<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-integrations/memory/zep_memory">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Zep Memory | 🦜️🔗 Langchain</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://jiaqiwang969.github.io/langchain/img/parrot-chainlink-icon.png"><meta data-rh="true" name="twitter:image" content="https://jiaqiwang969.github.io/langchain/img/parrot-chainlink-icon.png"><meta data-rh="true" property="og:url" content="https://jiaqiwang969.github.io/langchain/docs/integrations/memory/zep_memory"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Zep Memory | 🦜️🔗 Langchain"><meta data-rh="true" name="description" content="REACT Agent Chat Message History with Zep - A long-term memory store for LLM applications."><meta data-rh="true" property="og:description" content="REACT Agent Chat Message History with Zep - A long-term memory store for LLM applications."><link data-rh="true" rel="icon" href="/langchain/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://jiaqiwang969.github.io/langchain/docs/integrations/memory/zep_memory"><link data-rh="true" rel="alternate" href="https://jiaqiwang969.github.io/langchain/docs/integrations/memory/zep_memory" hreflang="en"><link data-rh="true" rel="alternate" href="https://jiaqiwang969.github.io/langchain/docs/integrations/memory/zep_memory" hreflang="x-default"><link rel="stylesheet" href="/langchain/assets/css/styles.b9396054.css">
<link rel="preload" href="/langchain/assets/js/runtime~main.96bce49c.js" as="script">
<link rel="preload" href="/langchain/assets/js/main.581eebae.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/langchain/"><b class="navbar__title text--truncate">🦜️🔗 LangChain</b></a><a class="navbar__item navbar__link" href="/langchain/docs/get_started/introduction">Docs</a><a class="navbar__item navbar__link" href="/langchain/docs/use_cases">Use cases</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/langchain/docs/integrations">Integrations</a><a href="https://api.python.langchain.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">API<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://smith.langchain.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">LangSmith</a><a href="https://js.langchain.com/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">JS/TS Docs</a><a href="https://github.com/hwchase17/langchain" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="mendable-search"><button class="ms-global search-btn__input ms-m-0 ms-flex ms-h-10 ms-w-full ms-flex-row ms-items-center ms-justify-between ms-gap-2 ms-rounded-xl ms-bg-gray-50 ms-p-1 ms-pl-2 ms-pr-1 ms-shadow ms-outline-none ms-ring-0 ms-transition-all hover:ms-cursor-pointer hover:ms-shadow-md sm:ms-p-2 sm:ms-pl-4 sm:ms-pr-2"><div class="ms-global search-btn__input-container ms-flex ms-w-full ms-min-w-0 ms-items-center ms-gap-1"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="search-btn__icon hover:fill-white ms-h-5 ms-w-5 ms-fill-gray-400 ms-text-gray-400 hover:ms-text-white focus:ms-fill-white focus:ms-text-white sm:ms-h-6 sm:ms-w-6" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg><input readonly="" id="userInput" name="userInput" maxlength="512" placeholder="Search..." class="ms-global search-btn__input ms-w-full ms-flex-grow ms-truncate ms-bg-transparent ms-text-sm ms-outline-none ms-ring-0 ms-ring-transparent hover:ms-cursor-text focus:ms-outline-none focus:ms-ring-0 focus:ms-ring-transparent sm:ms-text-base"></div><div class="search-btn__shortcut ms-z-10 ms-flex ms-flex-row ms-items-center ms-gap-1 ms-rounded-lg ms-border ms-py-[2px] ms-px-[8px] ms-text-xs ms-text-gray-400 ms-transition-all disabled:ms-bg-opacity-10"><span>CTRL</span><span>K</span></div></button><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/langchain/docs/integrations">Integrations</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/langchain/docs/integrations/callbacks/">Callbacks</a><button aria-label="Toggle the collapsible sidebar category &#x27;Callbacks&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/langchain/docs/integrations/chat/">Chat models</a><button aria-label="Toggle the collapsible sidebar category &#x27;Chat models&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/langchain/docs/integrations/chat_loaders/">Chat loaders</a><button aria-label="Toggle the collapsible sidebar category &#x27;Chat loaders&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/langchain/docs/integrations/document_loaders/">Document loaders</a><button aria-label="Toggle the collapsible sidebar category &#x27;Document loaders&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/langchain/docs/integrations/document_transformers/">Document transformers</a><button aria-label="Toggle the collapsible sidebar category &#x27;Document transformers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/langchain/docs/integrations/llms/">LLMs</a><button aria-label="Toggle the collapsible sidebar category &#x27;LLMs&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/langchain/docs/integrations/memory/">Memory</a><button aria-label="Toggle the collapsible sidebar category &#x27;Memory&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/memory/cassandra_chat_message_history">Cassandra Chat Message History</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/memory/dynamodb_chat_message_history">Dynamodb Chat Message History</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/memory/entity_memory_with_sqlite">Entity Memory with SQLite storage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/memory/momento_chat_message_history">Momento Chat Message History</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/memory/mongodb_chat_message_history">Mongodb Chat Message History</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/memory/motorhead_memory">Motörhead Memory</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/memory/motorhead_memory_managed">Motörhead Memory (Managed)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/memory/postgres_chat_message_history">Postgres Chat Message History</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/memory/redis_chat_message_history">Redis Chat Message History</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/memory/rockset_chat_message_history">Rockset Chat Message History</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/memory/sql_chat_message_history">SQL Chat Message History</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/memory/streamlit_chat_message_history">Streamlit Chat Message History</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/memory/xata_chat_message_history">Xata chat memory</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/langchain/docs/integrations/memory/zep_memory">Zep Memory</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/langchain/docs/integrations/retrievers/">Retrievers</a><button aria-label="Toggle the collapsible sidebar category &#x27;Retrievers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/langchain/docs/integrations/text_embedding/">Text embedding models</a><button aria-label="Toggle the collapsible sidebar category &#x27;Text embedding models&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/langchain/docs/integrations/toolkits/">Agents &amp; Toolkits</a><button aria-label="Toggle the collapsible sidebar category &#x27;Agents &amp; Toolkits&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/langchain/docs/integrations/tools/">Tools</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tools&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/langchain/docs/integrations/vectorstores/">Vector stores</a><button aria-label="Toggle the collapsible sidebar category &#x27;Vector stores&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/langchain/docs/integrations/providers/">Grouped by provider</a><button aria-label="Toggle the collapsible sidebar category &#x27;Grouped by provider&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/langchain/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/langchain/docs/integrations"><span itemprop="name">Integrations</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/langchain/docs/integrations/memory/"><span itemprop="name">Memory</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Zep Memory</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Zep Memory</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="react-agent-chat-message-history-with-zep---a-long-term-memory-store-for-llm-applications">REACT Agent Chat Message History with Zep - A long-term memory store for LLM applications.<a href="#react-agent-chat-message-history-with-zep---a-long-term-memory-store-for-llm-applications" class="hash-link" aria-label="Direct link to REACT Agent Chat Message History with Zep - A long-term memory store for LLM applications." title="Direct link to REACT Agent Chat Message History with Zep - A long-term memory store for LLM applications.">​</a></h2><p>This notebook demonstrates how to use the <a href="https://docs.getzep.com/" target="_blank" rel="noopener noreferrer">Zep Long-term Memory Store</a> as memory for your chatbot.</p><p>We&#x27;ll demonstrate:</p><ol><li>Adding conversation history to the Zep memory store.</li><li>Running an agent and having message automatically added to the store.</li><li>Viewing the enriched messages.</li><li>Vector search over the conversation history.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="more-on-zep">More on Zep:<a href="#more-on-zep" class="hash-link" aria-label="Direct link to More on Zep:" title="Direct link to More on Zep:">​</a></h3><p>Zep stores, summarizes, embeds, indexes, and enriches conversational AI chat histories, and exposes them via simple, low-latency APIs.</p><p>Key Features:</p><ul><li><strong>Fast!</strong> Zep’s async extractors operate independently of the your chat loop, ensuring a snappy user experience.</li><li><strong>Long-term memory persistence</strong>, with access to historical messages irrespective of your summarization strategy.</li><li><strong>Auto-summarization</strong> of memory messages based on a configurable message window. A series of summaries are stored, providing flexibility for future summarization strategies.</li><li><strong>Hybrid search</strong> over memories and metadata, with messages automatically embedded on creation.</li><li><strong>Entity Extractor</strong> that automatically extracts named entities from messages and stores them in the message metadata.</li><li><strong>Auto-token counting</strong> of memories and summaries, allowing finer-grained control over prompt assembly.</li><li>Python and JavaScript SDKs.</li></ul><p>Zep project: <a href="https://github.com/getzep/zep" target="_blank" rel="noopener noreferrer">https://github.com/getzep/zep</a>
Docs: <a href="https://docs.getzep.com/" target="_blank" rel="noopener noreferrer">https://docs.getzep.com/</a></p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">memory </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> ZepMemory</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">retrievers </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> ZepRetriever</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> OpenAI</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">schema </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> HumanMessage</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> AIMessage</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">utilities </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> WikipediaAPIWrapper</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">agents </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> initialize_agent</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> AgentType</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> Tool</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> uuid </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> uuid4</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># Set this to your Zep server URL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">ZEP_API_URL </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;http://localhost:8000&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">session_id </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(0, 112, 193)">str</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">uuid4</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(0, 128, 0)"># This is a unique identifier for the user</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div style="padding-top:1.3rem;background:var(--prism-background-color);color:var(--prism-color);margin-top:calc(-1 * var(--ifm-leading) - 5px);margin-bottom:var(--ifm-leading);box-shadow:var(--ifm-global-shadow-lw);border-bottom-left-radius:var(--ifm-code-border-radius);border-bottom-right-radius:var(--ifm-code-border-radius)"><h4 style="padding-left:0.65rem;margin-bottom:0.45rem">API Reference:</h4><ul style="padding-bottom:1rem"><li><a href="https://api.python.langchain.com/en/latest/memory/langchain.memory.zep_memory.ZepMemory.html"><span>ZepMemory</span></a></li><li><a href="https://api.python.langchain.com/en/latest/retrievers/langchain.retrievers.zep.ZepRetriever.html"><span>ZepRetriever</span></a></li><li><a href="https://api.python.langchain.com/en/latest/schema/langchain.schema.messages.HumanMessage.html"><span>HumanMessage</span></a></li><li><a href="https://api.python.langchain.com/en/latest/schema/langchain.schema.messages.AIMessage.html"><span>AIMessage</span></a></li><li><a href="https://api.python.langchain.com/en/latest/utilities/langchain.utilities.wikipedia.WikipediaAPIWrapper.html"><span>WikipediaAPIWrapper</span></a></li><li><a href="https://api.python.langchain.com/en/latest/agents/langchain.agents.initialize.initialize_agent.html"><span>initialize_agent</span></a></li><li><a href="https://api.python.langchain.com/en/latest/agents/langchain.agents.agent_types.AgentType.html"><span>AgentType</span></a></li><li><a href="https://api.python.langchain.com/en/latest/tools/langchain.tools.base.Tool.html"><span>Tool</span></a></li></ul></div><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"># Provide your OpenAI key</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> getpass</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">openai_key </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> getpass</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">getpass</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"># Provide your Zep API key. Note that this is optional. See https://docs.getzep.com/deployment/auth</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">zep_api_key </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> getpass</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">getpass</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="initialize-the-zep-chat-message-history-class-and-initialize-the-agent">Initialize the Zep Chat Message History Class and initialize the Agent<a href="#initialize-the-zep-chat-message-history-class-and-initialize-the-agent" class="hash-link" aria-label="Direct link to Initialize the Zep Chat Message History Class and initialize the Agent" title="Direct link to Initialize the Zep Chat Message History Class and initialize the Agent">​</a></h3><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">search </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> WikipediaAPIWrapper</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">tools </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Tool</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        name</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Search&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        func</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">search</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">run</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        description</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;useful for when you need to search online for answers. You should ask targeted questions&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># Set up Zep Chat History</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">memory </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> ZepMemory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    session_id</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">session_id</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    url</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">ZEP_API_URL</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    api_key</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">zep_api_key</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    memory_key</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;chat_history&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># Initialize the agent</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">llm </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> OpenAI</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">temperature</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> openai_api_key</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">openai_key</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">agent_chain </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> initialize_agent</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    tools</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    llm</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    agent</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">AgentType</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">CONVERSATIONAL_REACT_DESCRIPTION</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    verbose</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token boolean">True</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    memory</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">memory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-some-history-data">Add some history data<a href="#add-some-history-data" class="hash-link" aria-label="Direct link to Add some history data" title="Direct link to Add some history data">​</a></h3><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"># Preload some messages into the memory. The default message window is 12 messages. We want to push beyond this to demonstrate auto-summarization.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">test_history </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;role&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;human&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;content&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Who was Octavia Butler?&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;role&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;ai&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;content&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Octavia Estelle Butler (June 22, 1947 – February 24, 2006) was an American&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token string" style="color:rgb(163, 21, 21)">&quot; science fiction author.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;role&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;human&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;content&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Which books of hers were made into movies?&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;role&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;ai&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;content&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;The most well-known adaptation of Octavia Butler&#x27;s work is the FX series&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token string" style="color:rgb(163, 21, 21)">&quot; Kindred, based on her novel of the same name.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;role&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;human&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;content&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Who were her contemporaries?&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;role&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;ai&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;content&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Octavia Butler&#x27;s contemporaries included Ursula K. Le Guin, Samuel R.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token string" style="color:rgb(163, 21, 21)">&quot; Delany, and Joanna Russ.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;role&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;human&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;content&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;What awards did she win?&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;role&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;ai&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;content&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Octavia Butler won the Hugo Award, the Nebula Award, and the MacArthur&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token string" style="color:rgb(163, 21, 21)">&quot; Fellowship.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;role&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;human&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;content&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Which other women sci-fi writers might I want to read?&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;role&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;ai&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;content&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;You might want to read Ursula K. Le Guin or Joanna Russ.&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;role&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;human&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;content&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Write a short synopsis of Butler&#x27;s book, Parable of the Sower. What is it&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token string" style="color:rgb(163, 21, 21)">&quot; about?&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;role&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;ai&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;content&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Parable of the Sower is a science fiction novel by Octavia Butler,&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token string" style="color:rgb(163, 21, 21)">&quot; published in 1993. It follows the story of Lauren Olamina, a young woman&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token string" style="color:rgb(163, 21, 21)">&quot; living in a dystopian future where society has collapsed due to&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token string" style="color:rgb(163, 21, 21)">&quot; environmental disasters, poverty, and violence.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;metadata&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;foo&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;bar&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">for</span><span class="token plain"> msg </span><span class="token keyword" style="color:rgb(0, 0, 255)">in</span><span class="token plain"> test_history</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    memory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">chat_memory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">add_message</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        HumanMessage</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">content</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">msg</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;content&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> msg</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;role&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">==</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;human&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">else</span><span class="token plain"> AIMessage</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">content</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">msg</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;content&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        metadata</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">msg</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">get</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;metadata&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="run-the-agent">Run the agent<a href="#run-the-agent" class="hash-link" aria-label="Direct link to Run the agent" title="Direct link to Run the agent">​</a></h3><p>Doing so will automatically add the input and response to the Zep memory.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">agent_chain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">run</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token builtin" style="color:rgb(0, 112, 193)">input</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;What is the book&#x27;s relevance to the challenges facing contemporary society?&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div lang="python"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &gt; Entering new  chain...</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought: Do I need to use a tool? No</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    AI: Parable of the Sower is a prescient novel that speaks to the challenges facing contemporary society, such as climate change, inequality, and violence. It is a cautionary tale that warns of the dangers of unchecked greed and the need for individuals to take responsibility for their own lives and the lives of those around them.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &gt; Finished chain.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &#x27;Parable of the Sower is a prescient novel that speaks to the challenges facing contemporary society, such as climate change, inequality, and violence. It is a cautionary tale that warns of the dangers of unchecked greed and the need for individuals to take responsibility for their own lives and the lives of those around them.&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="inspect-the-zep-memory">Inspect the Zep memory<a href="#inspect-the-zep-memory" class="hash-link" aria-label="Direct link to Inspect the Zep memory" title="Direct link to Inspect the Zep memory">​</a></h3><p>Note the summary, and that the history has been enriched with token counts, UUIDs, and timestamps.</p><p>Summaries are biased towards the most recent messages.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">print_messages</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">messages</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">for</span><span class="token plain"> m </span><span class="token keyword" style="color:rgb(0, 0, 255)">in</span><span class="token plain"> messages</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">print</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">m</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token builtin" style="color:rgb(0, 112, 193)">type</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;:\n&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> m</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token builtin" style="color:rgb(0, 112, 193)">dict</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">print</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">memory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">chat_memory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">zep_summary</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">print</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;\n&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">print_messages</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">memory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">chat_memory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">messages</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div lang="python"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">    The human inquires about Octavia Butler. The AI identifies her as an American science fiction author. The human then asks which books of hers were made into movies. The AI responds by mentioning the FX series Kindred, based on her novel of the same name. The human then asks about her contemporaries, and the AI lists Ursula K. Le Guin, Samuel R. Delany, and Joanna Russ.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    system :</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">     {&#x27;content&#x27;: &#x27;The human inquires about Octavia Butler. The AI identifies her as an American science fiction author. The human then asks which books of hers were made into movies. The AI responds by mentioning the FX series Kindred, based on her novel of the same name. The human then asks about her contemporaries, and the AI lists Ursula K. Le Guin, Samuel R. Delany, and Joanna Russ.&#x27;, &#x27;additional_kwargs&#x27;: {}}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    human :</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">     {&#x27;content&#x27;: &#x27;What awards did she win?&#x27;, &#x27;additional_kwargs&#x27;: {&#x27;uuid&#x27;: &#x27;6b733f0b-6778-49ae-b3ec-4e077c039f31&#x27;, &#x27;created_at&#x27;: &#x27;2023-07-09T19:23:16.611232Z&#x27;, &#x27;token_count&#x27;: 8, &#x27;metadata&#x27;: {&#x27;system&#x27;: {&#x27;entities&#x27;: [], &#x27;intent&#x27;: &#x27;The subject is inquiring about the awards that someone, whose identity is not specified, has won.&#x27;}}}, &#x27;example&#x27;: False}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    ai :</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">     {&#x27;content&#x27;: &#x27;Octavia Butler won the Hugo Award, the Nebula Award, and the MacArthur Fellowship.&#x27;, &#x27;additional_kwargs&#x27;: {&#x27;uuid&#x27;: &#x27;2f6d80c6-3c08-4fd4-8d4e-7bbee341ac90&#x27;, &#x27;created_at&#x27;: &#x27;2023-07-09T19:23:16.618947Z&#x27;, &#x27;token_count&#x27;: 21, &#x27;metadata&#x27;: {&#x27;system&#x27;: {&#x27;entities&#x27;: [{&#x27;Label&#x27;: &#x27;PERSON&#x27;, &#x27;Matches&#x27;: [{&#x27;End&#x27;: 14, &#x27;Start&#x27;: 0, &#x27;Text&#x27;: &#x27;Octavia Butler&#x27;}], &#x27;Name&#x27;: &#x27;Octavia Butler&#x27;}, {&#x27;Label&#x27;: &#x27;WORK_OF_ART&#x27;, &#x27;Matches&#x27;: [{&#x27;End&#x27;: 33, &#x27;Start&#x27;: 19, &#x27;Text&#x27;: &#x27;the Hugo Award&#x27;}], &#x27;Name&#x27;: &#x27;the Hugo Award&#x27;}, {&#x27;Label&#x27;: &#x27;EVENT&#x27;, &#x27;Matches&#x27;: [{&#x27;End&#x27;: 81, &#x27;Start&#x27;: 57, &#x27;Text&#x27;: &#x27;the MacArthur Fellowship&#x27;}], &#x27;Name&#x27;: &#x27;the MacArthur Fellowship&#x27;}], &#x27;intent&#x27;: &#x27;The subject is stating that Octavia Butler received the Hugo Award, the Nebula Award, and the MacArthur Fellowship.&#x27;}}}, &#x27;example&#x27;: False}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    human :</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">     {&#x27;content&#x27;: &#x27;Which other women sci-fi writers might I want to read?&#x27;, &#x27;additional_kwargs&#x27;: {&#x27;uuid&#x27;: &#x27;ccdcc901-ea39-4981-862f-6fe22ab9289b&#x27;, &#x27;created_at&#x27;: &#x27;2023-07-09T19:23:16.62678Z&#x27;, &#x27;token_count&#x27;: 14, &#x27;metadata&#x27;: {&#x27;system&#x27;: {&#x27;entities&#x27;: [], &#x27;intent&#x27;: &#x27;The subject is seeking recommendations for additional women science fiction writers to explore.&#x27;}}}, &#x27;example&#x27;: False}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    ai :</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">     {&#x27;content&#x27;: &#x27;You might want to read Ursula K. Le Guin or Joanna Russ.&#x27;, &#x27;additional_kwargs&#x27;: {&#x27;uuid&#x27;: &#x27;7977099a-0c62-4c98-bfff-465bbab6c9c3&#x27;, &#x27;created_at&#x27;: &#x27;2023-07-09T19:23:16.631721Z&#x27;, &#x27;token_count&#x27;: 18, &#x27;metadata&#x27;: {&#x27;system&#x27;: {&#x27;entities&#x27;: [{&#x27;Label&#x27;: &#x27;ORG&#x27;, &#x27;Matches&#x27;: [{&#x27;End&#x27;: 40, &#x27;Start&#x27;: 23, &#x27;Text&#x27;: &#x27;Ursula K. Le Guin&#x27;}], &#x27;Name&#x27;: &#x27;Ursula K. Le Guin&#x27;}, {&#x27;Label&#x27;: &#x27;PERSON&#x27;, &#x27;Matches&#x27;: [{&#x27;End&#x27;: 55, &#x27;Start&#x27;: 44, &#x27;Text&#x27;: &#x27;Joanna Russ&#x27;}], &#x27;Name&#x27;: &#x27;Joanna Russ&#x27;}], &#x27;intent&#x27;: &#x27;The subject is suggesting that the person should consider reading the works of Ursula K. Le Guin or Joanna Russ.&#x27;}}}, &#x27;example&#x27;: False}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    human :</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">     {&#x27;content&#x27;: &quot;Write a short synopsis of Butler&#x27;s book, Parable of the Sower. What is it about?&quot;, &#x27;additional_kwargs&#x27;: {&#x27;uuid&#x27;: &#x27;e439b7e6-286a-4278-a8cb-dc260fa2e089&#x27;, &#x27;created_at&#x27;: &#x27;2023-07-09T19:23:16.63623Z&#x27;, &#x27;token_count&#x27;: 23, &#x27;metadata&#x27;: {&#x27;system&#x27;: {&#x27;entities&#x27;: [{&#x27;Label&#x27;: &#x27;ORG&#x27;, &#x27;Matches&#x27;: [{&#x27;End&#x27;: 32, &#x27;Start&#x27;: 26, &#x27;Text&#x27;: &#x27;Butler&#x27;}], &#x27;Name&#x27;: &#x27;Butler&#x27;}, {&#x27;Label&#x27;: &#x27;WORK_OF_ART&#x27;, &#x27;Matches&#x27;: [{&#x27;End&#x27;: 61, &#x27;Start&#x27;: 41, &#x27;Text&#x27;: &#x27;Parable of the Sower&#x27;}], &#x27;Name&#x27;: &#x27;Parable of the Sower&#x27;}], &#x27;intent&#x27;: &#x27;The subject is requesting a brief summary or explanation of the book &quot;Parable of the Sower&quot; by Butler.&#x27;}}}, &#x27;example&#x27;: False}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    ai :</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">     {&#x27;content&#x27;: &#x27;Parable of the Sower is a science fiction novel by Octavia Butler, published in 1993. It follows the story of Lauren Olamina, a young woman living in a dystopian future where society has collapsed due to environmental disasters, poverty, and violence.&#x27;, &#x27;additional_kwargs&#x27;: {&#x27;uuid&#x27;: &#x27;6760489b-19c9-41aa-8b45-fae6cb1d7ee6&#x27;, &#x27;created_at&#x27;: &#x27;2023-07-09T19:23:16.647524Z&#x27;, &#x27;token_count&#x27;: 56, &#x27;metadata&#x27;: {&#x27;foo&#x27;: &#x27;bar&#x27;, &#x27;system&#x27;: {&#x27;entities&#x27;: [{&#x27;Label&#x27;: &#x27;GPE&#x27;, &#x27;Matches&#x27;: [{&#x27;End&#x27;: 20, &#x27;Start&#x27;: 15, &#x27;Text&#x27;: &#x27;Sower&#x27;}], &#x27;Name&#x27;: &#x27;Sower&#x27;}, {&#x27;Label&#x27;: &#x27;PERSON&#x27;, &#x27;Matches&#x27;: [{&#x27;End&#x27;: 65, &#x27;Start&#x27;: 51, &#x27;Text&#x27;: &#x27;Octavia Butler&#x27;}], &#x27;Name&#x27;: &#x27;Octavia Butler&#x27;}, {&#x27;Label&#x27;: &#x27;DATE&#x27;, &#x27;Matches&#x27;: [{&#x27;End&#x27;: 84, &#x27;Start&#x27;: 80, &#x27;Text&#x27;: &#x27;1993&#x27;}], &#x27;Name&#x27;: &#x27;1993&#x27;}, {&#x27;Label&#x27;: &#x27;PERSON&#x27;, &#x27;Matches&#x27;: [{&#x27;End&#x27;: 124, &#x27;Start&#x27;: 110, &#x27;Text&#x27;: &#x27;Lauren Olamina&#x27;}], &#x27;Name&#x27;: &#x27;Lauren Olamina&#x27;}], &#x27;intent&#x27;: &#x27;The subject is providing information about the novel &quot;Parable of the Sower&quot; by Octavia Butler, including its genre, publication date, and a brief summary of the plot.&#x27;}}}, &#x27;example&#x27;: False}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    human :</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">     {&#x27;content&#x27;: &quot;What is the book&#x27;s relevance to the challenges facing contemporary society?&quot;, &#x27;additional_kwargs&#x27;: {&#x27;uuid&#x27;: &#x27;7dbbbb93-492b-4739-800f-cad2b6e0e764&#x27;, &#x27;created_at&#x27;: &#x27;2023-07-09T19:23:19.315182Z&#x27;, &#x27;token_count&#x27;: 15, &#x27;metadata&#x27;: {&#x27;system&#x27;: {&#x27;entities&#x27;: [], &#x27;intent&#x27;: &#x27;The subject is asking about the relevance of a book to the challenges currently faced by society.&#x27;}}}, &#x27;example&#x27;: False}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    ai :</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">     {&#x27;content&#x27;: &#x27;Parable of the Sower is a prescient novel that speaks to the challenges facing contemporary society, such as climate change, inequality, and violence. It is a cautionary tale that warns of the dangers of unchecked greed and the need for individuals to take responsibility for their own lives and the lives of those around them.&#x27;, &#x27;additional_kwargs&#x27;: {&#x27;uuid&#x27;: &#x27;3e14ac8f-b7c1-4360-958b-9f3eae1f784f&#x27;, &#x27;created_at&#x27;: &#x27;2023-07-09T19:23:19.332517Z&#x27;, &#x27;token_count&#x27;: 66, &#x27;metadata&#x27;: {&#x27;system&#x27;: {&#x27;entities&#x27;: [{&#x27;Label&#x27;: &#x27;GPE&#x27;, &#x27;Matches&#x27;: [{&#x27;End&#x27;: 20, &#x27;Start&#x27;: 15, &#x27;Text&#x27;: &#x27;Sower&#x27;}], &#x27;Name&#x27;: &#x27;Sower&#x27;}], &#x27;intent&#x27;: &#x27;The subject is providing an analysis and evaluation of the novel &quot;Parable of the Sower&quot; and highlighting its relevance to contemporary societal challenges.&#x27;}}}, &#x27;example&#x27;: False}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="vector-search-over-the-zep-memory">Vector search over the Zep memory<a href="#vector-search-over-the-zep-memory" class="hash-link" aria-label="Direct link to Vector search over the Zep memory" title="Direct link to Vector search over the Zep memory">​</a></h3><p>Zep provides native vector search over historical conversation memory via the <code>ZepRetriever</code>.</p><p>You can use the <code>ZepRetriever</code> with chains that support passing in a Langchain <code>Retriever</code> object.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">retriever </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> ZepRetriever</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    session_id</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">session_id</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    url</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">ZEP_API_URL</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    api_key</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">zep_api_key</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">search_results </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> memory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">chat_memory</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">search</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;who are some famous women sci-fi authors?&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">for</span><span class="token plain"> r </span><span class="token keyword" style="color:rgb(0, 0, 255)">in</span><span class="token plain"> search_results</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> r</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">dist </span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0.8</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">  </span><span class="token comment" style="color:rgb(0, 128, 0)"># Only print results with similarity of 0.8 or higher</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 255)">print</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">r</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">message</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> r</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">dist</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div lang="python"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">    {&#x27;uuid&#x27;: &#x27;ccdcc901-ea39-4981-862f-6fe22ab9289b&#x27;, &#x27;created_at&#x27;: &#x27;2023-07-09T19:23:16.62678Z&#x27;, &#x27;role&#x27;: &#x27;human&#x27;, &#x27;content&#x27;: &#x27;Which other women sci-fi writers might I want to read?&#x27;, &#x27;metadata&#x27;: {&#x27;system&#x27;: {&#x27;entities&#x27;: [], &#x27;intent&#x27;: &#x27;The subject is seeking recommendations for additional women science fiction writers to explore.&#x27;}}, &#x27;token_count&#x27;: 14} 0.9119619869747062</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    {&#x27;uuid&#x27;: &#x27;7977099a-0c62-4c98-bfff-465bbab6c9c3&#x27;, &#x27;created_at&#x27;: &#x27;2023-07-09T19:23:16.631721Z&#x27;, &#x27;role&#x27;: &#x27;ai&#x27;, &#x27;content&#x27;: &#x27;You might want to read Ursula K. Le Guin or Joanna Russ.&#x27;, &#x27;metadata&#x27;: {&#x27;system&#x27;: {&#x27;entities&#x27;: [{&#x27;Label&#x27;: &#x27;ORG&#x27;, &#x27;Matches&#x27;: [{&#x27;End&#x27;: 40, &#x27;Start&#x27;: 23, &#x27;Text&#x27;: &#x27;Ursula K. Le Guin&#x27;}], &#x27;Name&#x27;: &#x27;Ursula K. Le Guin&#x27;}, {&#x27;Label&#x27;: &#x27;PERSON&#x27;, &#x27;Matches&#x27;: [{&#x27;End&#x27;: 55, &#x27;Start&#x27;: 44, &#x27;Text&#x27;: &#x27;Joanna Russ&#x27;}], &#x27;Name&#x27;: &#x27;Joanna Russ&#x27;}], &#x27;intent&#x27;: &#x27;The subject is suggesting that the person should consider reading the works of Ursula K. Le Guin or Joanna Russ.&#x27;}}, &#x27;token_count&#x27;: 18} 0.8534346954749745</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    {&#x27;uuid&#x27;: &#x27;b05e2eb5-c103-4973-9458-928726f08655&#x27;, &#x27;created_at&#x27;: &#x27;2023-07-09T19:23:16.603098Z&#x27;, &#x27;role&#x27;: &#x27;ai&#x27;, &#x27;content&#x27;: &quot;Octavia Butler&#x27;s contemporaries included Ursula K. Le Guin, Samuel R. Delany, and Joanna Russ.&quot;, &#x27;metadata&#x27;: {&#x27;system&#x27;: {&#x27;entities&#x27;: [{&#x27;Label&#x27;: &#x27;PERSON&#x27;, &#x27;Matches&#x27;: [{&#x27;End&#x27;: 16, &#x27;Start&#x27;: 0, &#x27;Text&#x27;: &quot;Octavia Butler&#x27;s&quot;}], &#x27;Name&#x27;: &quot;Octavia Butler&#x27;s&quot;}, {&#x27;Label&#x27;: &#x27;ORG&#x27;, &#x27;Matches&#x27;: [{&#x27;End&#x27;: 58, &#x27;Start&#x27;: 41, &#x27;Text&#x27;: &#x27;Ursula K. Le Guin&#x27;}], &#x27;Name&#x27;: &#x27;Ursula K. Le Guin&#x27;}, {&#x27;Label&#x27;: &#x27;PERSON&#x27;, &#x27;Matches&#x27;: [{&#x27;End&#x27;: 76, &#x27;Start&#x27;: 60, &#x27;Text&#x27;: &#x27;Samuel R. Delany&#x27;}], &#x27;Name&#x27;: &#x27;Samuel R. Delany&#x27;}, {&#x27;Label&#x27;: &#x27;PERSON&#x27;, &#x27;Matches&#x27;: [{&#x27;End&#x27;: 93, &#x27;Start&#x27;: 82, &#x27;Text&#x27;: &#x27;Joanna Russ&#x27;}], &#x27;Name&#x27;: &#x27;Joanna Russ&#x27;}], &#x27;intent&#x27;: &quot;The subject is stating that Octavia Butler&#x27;s contemporaries included Ursula K. Le Guin, Samuel R. Delany, and Joanna Russ.&quot;}}, &#x27;token_count&#x27;: 27} 0.8523831524040919</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    {&#x27;uuid&#x27;: &#x27;e346f02b-f854-435d-b6ba-fb394a416b9b&#x27;, &#x27;created_at&#x27;: &#x27;2023-07-09T19:23:16.556587Z&#x27;, &#x27;role&#x27;: &#x27;human&#x27;, &#x27;content&#x27;: &#x27;Who was Octavia Butler?&#x27;, &#x27;metadata&#x27;: {&#x27;system&#x27;: {&#x27;entities&#x27;: [{&#x27;Label&#x27;: &#x27;PERSON&#x27;, &#x27;Matches&#x27;: [{&#x27;End&#x27;: 22, &#x27;Start&#x27;: 8, &#x27;Text&#x27;: &#x27;Octavia Butler&#x27;}], &#x27;Name&#x27;: &#x27;Octavia Butler&#x27;}], &#x27;intent&#x27;: &#x27;The subject is asking for information about the identity or background of Octavia Butler.&#x27;}}, &#x27;token_count&#x27;: 8} 0.8236355436055457</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    {&#x27;uuid&#x27;: &#x27;42ff41d2-c63a-4d5b-b19b-d9a87105cfc3&#x27;, &#x27;created_at&#x27;: &#x27;2023-07-09T19:23:16.578022Z&#x27;, &#x27;role&#x27;: &#x27;ai&#x27;, &#x27;content&#x27;: &#x27;Octavia Estelle Butler (June 22, 1947 – February 24, 2006) was an American science fiction author.&#x27;, &#x27;metadata&#x27;: {&#x27;system&#x27;: {&#x27;entities&#x27;: [{&#x27;Label&#x27;: &#x27;PERSON&#x27;, &#x27;Matches&#x27;: [{&#x27;End&#x27;: 22, &#x27;Start&#x27;: 0, &#x27;Text&#x27;: &#x27;Octavia Estelle Butler&#x27;}], &#x27;Name&#x27;: &#x27;Octavia Estelle Butler&#x27;}, {&#x27;Label&#x27;: &#x27;DATE&#x27;, &#x27;Matches&#x27;: [{&#x27;End&#x27;: 37, &#x27;Start&#x27;: 24, &#x27;Text&#x27;: &#x27;June 22, 1947&#x27;}], &#x27;Name&#x27;: &#x27;June 22, 1947&#x27;}, {&#x27;Label&#x27;: &#x27;DATE&#x27;, &#x27;Matches&#x27;: [{&#x27;End&#x27;: 57, &#x27;Start&#x27;: 40, &#x27;Text&#x27;: &#x27;February 24, 2006&#x27;}], &#x27;Name&#x27;: &#x27;February 24, 2006&#x27;}, {&#x27;Label&#x27;: &#x27;NORP&#x27;, &#x27;Matches&#x27;: [{&#x27;End&#x27;: 74, &#x27;Start&#x27;: 66, &#x27;Text&#x27;: &#x27;American&#x27;}], &#x27;Name&#x27;: &#x27;American&#x27;}], &#x27;intent&#x27;: &#x27;The subject is providing information about Octavia Estelle Butler, who was an American science fiction author.&#x27;}}, &#x27;token_count&#x27;: 31} 0.8206687242257686</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    {&#x27;uuid&#x27;: &#x27;2f6d80c6-3c08-4fd4-8d4e-7bbee341ac90&#x27;, &#x27;created_at&#x27;: &#x27;2023-07-09T19:23:16.618947Z&#x27;, &#x27;role&#x27;: &#x27;ai&#x27;, &#x27;content&#x27;: &#x27;Octavia Butler won the Hugo Award, the Nebula Award, and the MacArthur Fellowship.&#x27;, &#x27;metadata&#x27;: {&#x27;system&#x27;: {&#x27;entities&#x27;: [{&#x27;Label&#x27;: &#x27;PERSON&#x27;, &#x27;Matches&#x27;: [{&#x27;End&#x27;: 14, &#x27;Start&#x27;: 0, &#x27;Text&#x27;: &#x27;Octavia Butler&#x27;}], &#x27;Name&#x27;: &#x27;Octavia Butler&#x27;}, {&#x27;Label&#x27;: &#x27;WORK_OF_ART&#x27;, &#x27;Matches&#x27;: [{&#x27;End&#x27;: 33, &#x27;Start&#x27;: 19, &#x27;Text&#x27;: &#x27;the Hugo Award&#x27;}], &#x27;Name&#x27;: &#x27;the Hugo Award&#x27;}, {&#x27;Label&#x27;: &#x27;EVENT&#x27;, &#x27;Matches&#x27;: [{&#x27;End&#x27;: 81, &#x27;Start&#x27;: 57, &#x27;Text&#x27;: &#x27;the MacArthur Fellowship&#x27;}], &#x27;Name&#x27;: &#x27;the MacArthur Fellowship&#x27;}], &#x27;intent&#x27;: &#x27;The subject is stating that Octavia Butler received the Hugo Award, the Nebula Award, and the MacArthur Fellowship.&#x27;}}, &#x27;token_count&#x27;: 21} 0.8199012397683285</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/langchain/docs/integrations/memory/xata_chat_message_history"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Xata chat memory</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/langchain/docs/integrations/retrievers/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Retrievers</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#react-agent-chat-message-history-with-zep---a-long-term-memory-store-for-llm-applications" class="table-of-contents__link toc-highlight">REACT Agent Chat Message History with Zep - A long-term memory store for LLM applications.</a><ul><li><a href="#more-on-zep" class="table-of-contents__link toc-highlight">More on Zep:</a></li><li><a href="#initialize-the-zep-chat-message-history-class-and-initialize-the-agent" class="table-of-contents__link toc-highlight">Initialize the Zep Chat Message History Class and initialize the Agent</a></li><li><a href="#add-some-history-data" class="table-of-contents__link toc-highlight">Add some history data</a></li><li><a href="#run-the-agent" class="table-of-contents__link toc-highlight">Run the agent</a></li><li><a href="#inspect-the-zep-memory" class="table-of-contents__link toc-highlight">Inspect the Zep memory</a></li><li><a href="#vector-search-over-the-zep-memory" class="table-of-contents__link toc-highlight">Vector search over the Zep memory</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/cU2adEyC7w" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/LangChainAI" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">GitHub</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/hwchase17/langchain" target="_blank" rel="noopener noreferrer" class="footer__link-item">Python<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/hwchase17/langchainjs" target="_blank" rel="noopener noreferrer" class="footer__link-item">JS/TS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://langchain.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Homepage<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://blog.langchain.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 LangChain, Inc.</div></div></div></footer></div>
<script src="/langchain/assets/js/runtime~main.96bce49c.js"></script>
<script src="/langchain/assets/js/main.581eebae.js"></script>
</body>
</html>