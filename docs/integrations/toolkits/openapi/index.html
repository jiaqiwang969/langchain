<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-integrations/toolkits/openapi">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">OpenAPI | 🦜️🔗 Langchain</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://jiaqiwang969.github.io/langchain/img/parrot-chainlink-icon.png"><meta data-rh="true" name="twitter:image" content="https://jiaqiwang969.github.io/langchain/img/parrot-chainlink-icon.png"><meta data-rh="true" property="og:url" content="https://jiaqiwang969.github.io/langchain/docs/integrations/toolkits/openapi"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="OpenAPI | 🦜️🔗 Langchain"><meta data-rh="true" name="description" content="We can construct agents to consume arbitrary APIs, here APIs conformant to the OpenAPI/Swagger specification."><meta data-rh="true" property="og:description" content="We can construct agents to consume arbitrary APIs, here APIs conformant to the OpenAPI/Swagger specification."><link data-rh="true" rel="icon" href="/langchain/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://jiaqiwang969.github.io/langchain/docs/integrations/toolkits/openapi"><link data-rh="true" rel="alternate" href="https://jiaqiwang969.github.io/langchain/docs/integrations/toolkits/openapi" hreflang="en"><link data-rh="true" rel="alternate" href="https://jiaqiwang969.github.io/langchain/docs/integrations/toolkits/openapi" hreflang="x-default"><link rel="stylesheet" href="/langchain/assets/css/styles.b9396054.css">
<link rel="preload" href="/langchain/assets/js/runtime~main.a20b23d6.js" as="script">
<link rel="preload" href="/langchain/assets/js/main.af9852a9.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/langchain/"><b class="navbar__title text--truncate">🦜️🔗 LangChain</b></a><a class="navbar__item navbar__link" href="/langchain/docs/get_started/introduction">Docs</a><a class="navbar__item navbar__link" href="/langchain/docs/use_cases">Use cases</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/langchain/docs/integrations">Integrations</a><a href="https://api.python.langchain.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">API<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://smith.langchain.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">LangSmith</a><a href="https://js.langchain.com/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">JS/TS Docs</a><a href="https://github.com/hwchase17/langchain" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="mendable-search"><button class="ms-global search-btn__input ms-m-0 ms-flex ms-h-10 ms-w-full ms-flex-row ms-items-center ms-justify-between ms-gap-2 ms-rounded-xl ms-bg-gray-50 ms-p-1 ms-pl-2 ms-pr-1 ms-shadow ms-outline-none ms-ring-0 ms-transition-all hover:ms-cursor-pointer hover:ms-shadow-md sm:ms-p-2 sm:ms-pl-4 sm:ms-pr-2"><div class="ms-global search-btn__input-container ms-flex ms-w-full ms-min-w-0 ms-items-center ms-gap-1"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="search-btn__icon hover:fill-white ms-h-5 ms-w-5 ms-fill-gray-400 ms-text-gray-400 hover:ms-text-white focus:ms-fill-white focus:ms-text-white sm:ms-h-6 sm:ms-w-6" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg><input readonly="" id="userInput" name="userInput" maxlength="512" placeholder="Search..." class="ms-global search-btn__input ms-w-full ms-flex-grow ms-truncate ms-bg-transparent ms-text-sm ms-outline-none ms-ring-0 ms-ring-transparent hover:ms-cursor-text focus:ms-outline-none focus:ms-ring-0 focus:ms-ring-transparent sm:ms-text-base"></div><div class="search-btn__shortcut ms-z-10 ms-flex ms-flex-row ms-items-center ms-gap-1 ms-rounded-lg ms-border ms-py-[2px] ms-px-[8px] ms-text-xs ms-text-gray-400 ms-transition-all disabled:ms-bg-opacity-10"><span>CTRL</span><span>K</span></div></button><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/langchain/docs/integrations">Integrations</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/langchain/docs/integrations/callbacks/">Callbacks</a><button aria-label="Toggle the collapsible sidebar category &#x27;Callbacks&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/langchain/docs/integrations/chat/">Chat models</a><button aria-label="Toggle the collapsible sidebar category &#x27;Chat models&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/langchain/docs/integrations/chat_loaders/">Chat loaders</a><button aria-label="Toggle the collapsible sidebar category &#x27;Chat loaders&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/langchain/docs/integrations/document_loaders/">Document loaders</a><button aria-label="Toggle the collapsible sidebar category &#x27;Document loaders&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/langchain/docs/integrations/document_transformers/">Document transformers</a><button aria-label="Toggle the collapsible sidebar category &#x27;Document transformers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/langchain/docs/integrations/llms/">LLMs</a><button aria-label="Toggle the collapsible sidebar category &#x27;LLMs&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/langchain/docs/integrations/memory/">Memory</a><button aria-label="Toggle the collapsible sidebar category &#x27;Memory&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/langchain/docs/integrations/retrievers/">Retrievers</a><button aria-label="Toggle the collapsible sidebar category &#x27;Retrievers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/langchain/docs/integrations/text_embedding/">Text embedding models</a><button aria-label="Toggle the collapsible sidebar category &#x27;Text embedding models&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/langchain/docs/integrations/toolkits/">Agents &amp; Toolkits</a><button aria-label="Toggle the collapsible sidebar category &#x27;Agents &amp; Toolkits&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/toolkits/ainetwork">AINetwork</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/toolkits/airbyte_structured_qa">Airbyte Question Answering</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/toolkits/amadeus">Amadeus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/toolkits/azure_cognitive_services">Azure Cognitive Services</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/toolkits/csv">CSV</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/toolkits/document_comparison_toolkit">Document Comparison</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/toolkits/github">Github</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/toolkits/gmail">Gmail</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/toolkits/google_drive">Google Drive tool</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/toolkits/jira">Jira</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/toolkits/json">JSON</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/toolkits/multion">MultiOn</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/toolkits/office365">Office365</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/langchain/docs/integrations/toolkits/openapi">OpenAPI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/toolkits/openapi_nla">Natural Language APIs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/toolkits/pandas">Pandas Dataframe</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/toolkits/playwright">PlayWright Browser</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/toolkits/powerbi">PowerBI Dataset</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/toolkits/python">Python</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/toolkits/spark">Spark Dataframe</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/toolkits/spark_sql">Spark SQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/toolkits/sql_database">SQL Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/toolkits/vectorstore">Vectorstore</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/langchain/docs/integrations/toolkits/xorbits">Xorbits</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/langchain/docs/integrations/tools/">Tools</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tools&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/langchain/docs/integrations/vectorstores/">Vector stores</a><button aria-label="Toggle the collapsible sidebar category &#x27;Vector stores&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/langchain/docs/integrations/providers/">Grouped by provider</a><button aria-label="Toggle the collapsible sidebar category &#x27;Grouped by provider&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/langchain/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/langchain/docs/integrations"><span itemprop="name">Integrations</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/langchain/docs/integrations/toolkits/"><span itemprop="name">Agents &amp; Toolkits</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">OpenAPI</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>OpenAPI</h1><p>We can construct agents to consume arbitrary APIs, here APIs conformant to the <code>OpenAPI</code>/<code>Swagger</code> specification.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1st-example-hierarchical-planning-agent">1st example: hierarchical planning agent<a href="#1st-example-hierarchical-planning-agent" class="hash-link" aria-label="Direct link to 1st example: hierarchical planning agent" title="Direct link to 1st example: hierarchical planning agent">​</a></h2><p>In this example, we&#x27;ll consider an approach called hierarchical planning, common in robotics and appearing in recent works for LLMs X robotics. We&#x27;ll see it&#x27;s a viable approach to start working with a massive API spec AND to assist with user queries that require multiple steps against the API.</p><p>The idea is simple: to get coherent agent behavior over long sequences behavior &amp; to save on tokens, we&#x27;ll separate concerns: a &quot;planner&quot; will be responsible for what endpoints to call and a &quot;controller&quot; will be responsible for how to call them.</p><p>In the initial implementation, the planner is an LLM chain that has the name and a short description for each endpoint in context. The controller is an LLM agent that is instantiated with documentation for only the endpoints for a particular plan. There&#x27;s a lot left to get this working very robustly :)</p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="to-start-lets-collect-some-openapi-specs">To start, let&#x27;s collect some OpenAPI specs.<a href="#to-start-lets-collect-some-openapi-specs" class="hash-link" aria-label="Direct link to To start, let&#x27;s collect some OpenAPI specs." title="Direct link to To start, let&#x27;s collect some OpenAPI specs.">​</a></h3><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> os</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">wget</span><span class="token plain"> https://raw.githubusercontent.com/openai/openai-openapi/master/openapi.yaml</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token function" style="color:rgb(0, 0, 255)">mv</span><span class="token plain"> openapi.yaml openai_openapi.yaml</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token function" style="color:rgb(0, 0, 255)">wget</span><span class="token plain"> https://www.klarna.com/us/shopping/public/openai/v0/api-docs</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token function" style="color:rgb(0, 0, 255)">mv</span><span class="token plain"> api-docs klarna_openapi.yaml</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token function" style="color:rgb(0, 0, 255)">wget</span><span class="token plain"> https://raw.githubusercontent.com/APIs-guru/openapi-directory/main/APIs/spotify.com/1.0.0/openapi.yaml</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token function" style="color:rgb(0, 0, 255)">mv</span><span class="token plain"> openapi.yaml spotify_openapi.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div lang="bash"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">    --2023-03-31 15:45:56--  https://raw.githubusercontent.com/openai/openai-openapi/master/openapi.yaml</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Resolving raw.githubusercontent.com (raw.githubusercontent.com)... 185.199.110.133, 185.199.109.133, 185.199.111.133, ...</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Connecting to raw.githubusercontent.com (raw.githubusercontent.com)|185.199.110.133|:443... connected.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    HTTP request sent, awaiting response... 200 OK</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Length: 122995 (120K) [text/plain]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Saving to: ‘openapi.yaml’</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    openapi.yaml        100%[===================&gt;] 120.11K  --.-KB/s    in 0.01s   </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    2023-03-31 15:45:56 (10.4 MB/s) - ‘openapi.yaml’ saved [122995/122995]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    --2023-03-31 15:45:57--  https://www.klarna.com/us/shopping/public/openai/v0/api-docs</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Resolving www.klarna.com (www.klarna.com)... 52.84.150.34, 52.84.150.46, 52.84.150.61, ...</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Connecting to www.klarna.com (www.klarna.com)|52.84.150.34|:443... connected.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    HTTP request sent, awaiting response... 200 OK</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Length: unspecified [application/json]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Saving to: ‘api-docs’</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    api-docs                [ &lt;=&gt;                ]   1.87K  --.-KB/s    in 0s      </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    2023-03-31 15:45:57 (261 MB/s) - ‘api-docs’ saved [1916]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    --2023-03-31 15:45:57--  https://raw.githubusercontent.com/APIs-guru/openapi-directory/main/APIs/spotify.com/1.0.0/openapi.yaml</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Resolving raw.githubusercontent.com (raw.githubusercontent.com)... 185.199.110.133, 185.199.109.133, 185.199.111.133, ...</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Connecting to raw.githubusercontent.com (raw.githubusercontent.com)|185.199.110.133|:443... connected.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    HTTP request sent, awaiting response... 200 OK</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Length: 286747 (280K) [text/plain]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Saving to: ‘openapi.yaml’</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    openapi.yaml        100%[===================&gt;] 280.03K  --.-KB/s    in 0.02s   </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    2023-03-31 15:45:58 (13.3 MB/s) - ‘openapi.yaml’ saved [286747/286747]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">agents</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">agent_toolkits</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">openapi</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">spec </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> reduce_openapi_spec</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div style="padding-top:1.3rem;background:var(--prism-background-color);color:var(--prism-color);margin-top:calc(-1 * var(--ifm-leading) - 5px);margin-bottom:var(--ifm-leading);box-shadow:var(--ifm-global-shadow-lw);border-bottom-left-radius:var(--ifm-code-border-radius);border-bottom-right-radius:var(--ifm-code-border-radius)"><h4 style="padding-left:0.65rem;margin-bottom:0.45rem">API Reference:</h4><ul style="padding-bottom:1rem"><li><a href="https://api.python.langchain.com/en/latest/agents/langchain.agents.agent_toolkits.openapi.spec.reduce_openapi_spec.html"><span>reduce_openapi_spec</span></a></li></ul></div><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">with</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(0, 112, 193)">open</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;openai_openapi.yaml&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">as</span><span class="token plain"> f</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    raw_openai_api_spec </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> yaml</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">load</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">f</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> Loader</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">yaml</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">Loader</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">openai_api_spec </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> reduce_openapi_spec</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">raw_openai_api_spec</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">with</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(0, 112, 193)">open</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;klarna_openapi.yaml&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">as</span><span class="token plain"> f</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    raw_klarna_api_spec </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> yaml</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">load</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">f</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> Loader</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">yaml</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">Loader</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">klarna_api_spec </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> reduce_openapi_spec</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">raw_klarna_api_spec</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">with</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(0, 112, 193)">open</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;spotify_openapi.yaml&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">as</span><span class="token plain"> f</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    raw_spotify_api_spec </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> yaml</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">load</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">f</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> Loader</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">yaml</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">Loader</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">spotify_api_spec </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> reduce_openapi_spec</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">raw_spotify_api_spec</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p>We&#x27;ll work with the Spotify API as one of the examples of a somewhat complex API. There&#x27;s a bit of auth-related setup to do if you want to replicate this.</p><ul><li>You&#x27;ll have to set up an application in the Spotify developer console, documented <a href="https://developer.spotify.com/documentation/general/guides/authorization/" target="_blank" rel="noopener noreferrer">here</a>, to get credentials: <code>CLIENT_ID</code>, <code>CLIENT_SECRET</code>, and <code>REDIRECT_URI</code>.</li><li>To get an access tokens (and keep them fresh), you can implement the oauth flows, or you can use <code>spotipy</code>. If you&#x27;ve set your Spotify creedentials as environment variables <code>SPOTIPY_CLIENT_ID</code>, <code>SPOTIPY_CLIENT_SECRET</code>, and <code>SPOTIPY_REDIRECT_URI</code>, you can use the helper functions below:</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> spotipy</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">util </span><span class="token keyword" style="color:rgb(0, 0, 255)">as</span><span class="token plain"> util</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">requests </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> RequestsWrapper</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">construct_spotify_auth_headers</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">raw_spec</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(0, 112, 193)">dict</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    scopes </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(0, 112, 193)">list</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        raw_spec</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;components&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;securitySchemes&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;oauth_2_0&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;flows&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;authorizationCode&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;scopes&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">keys</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    access_token </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> util</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">prompt_for_user_token</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">scope</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;,&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">join</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">scopes</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Authorization&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:rgb(163, 21, 21)">f&quot;Bearer </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token string-interpolation interpolation">access_token</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token string-interpolation string" style="color:rgb(163, 21, 21)">&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># Get API credentials.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">headers </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> construct_spotify_auth_headers</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">raw_spotify_api_spec</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">requests_wrapper </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> RequestsWrapper</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">headers</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">headers</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div style="padding-top:1.3rem;background:var(--prism-background-color);color:var(--prism-color);margin-top:calc(-1 * var(--ifm-leading) - 5px);margin-bottom:var(--ifm-leading);box-shadow:var(--ifm-global-shadow-lw);border-bottom-left-radius:var(--ifm-code-border-radius);border-bottom-right-radius:var(--ifm-code-border-radius)"><h4 style="padding-left:0.65rem;margin-bottom:0.45rem">API Reference:</h4><ul style="padding-bottom:1rem"><li><a href="https://api.python.langchain.com/en/latest/utilities/langchain.utilities.requests.RequestsWrapper.html"><span>RequestsWrapper</span></a></li></ul></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-big-is-this-spec">How big is this spec?<a href="#how-big-is-this-spec" class="hash-link" aria-label="Direct link to How big is this spec?" title="Direct link to How big is this spec?">​</a></h3><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">endpoints </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">route</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> operation</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">for</span><span class="token plain"> route</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> operations </span><span class="token keyword" style="color:rgb(0, 0, 255)">in</span><span class="token plain"> raw_spotify_api_spec</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;paths&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">items</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">for</span><span class="token plain"> operation </span><span class="token keyword" style="color:rgb(0, 0, 255)">in</span><span class="token plain"> operations</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> operation </span><span class="token keyword" style="color:rgb(0, 0, 255)">in</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;get&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;post&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token builtin" style="color:rgb(0, 112, 193)">len</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">endpoints</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div lang="python"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">    63</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> tiktoken</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">enc </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> tiktoken</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">encoding_for_model</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;text-davinci-003&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">count_tokens</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">s</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(0, 112, 193)">len</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">enc</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">encode</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">s</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">count_tokens</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">yaml</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">dump</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">raw_spotify_api_spec</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div lang="python"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">    80326</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="lets-see-some-examples">Let&#x27;s see some examples!<a href="#lets-see-some-examples" class="hash-link" aria-label="Direct link to Let&#x27;s see some examples!" title="Direct link to Let&#x27;s see some examples!">​</a></h3><p>Starting with GPT-4. (Some robustness iterations under way for GPT-3 family.)</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">llms</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">openai </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> OpenAI</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">agents</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">agent_toolkits</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">openapi </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> planner</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">llm </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> OpenAI</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">model_name</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;gpt-4&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> temperature</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">0.0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div style="padding-top:1.3rem;background:var(--prism-background-color);color:var(--prism-color);margin-top:calc(-1 * var(--ifm-leading) - 5px);margin-bottom:var(--ifm-leading);box-shadow:var(--ifm-global-shadow-lw);border-bottom-left-radius:var(--ifm-code-border-radius);border-bottom-right-radius:var(--ifm-code-border-radius)"><h4 style="padding-left:0.65rem;margin-bottom:0.45rem">API Reference:</h4><ul style="padding-bottom:1rem"><li><a href="https://api.python.langchain.com/en/latest/llms/langchain.llms.openai.OpenAI.html"><span>OpenAI</span></a></li></ul></div><div lang="python"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">    /Users/jeremywelborn/src/langchain/langchain/llms/openai.py:169: UserWarning: You are trying to use a chat model. This way of initializing it is no longer supported. Instead, please use: `from langchain.chat_models import ChatOpenAI`</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      warnings.warn(</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    /Users/jeremywelborn/src/langchain/langchain/llms/openai.py:608: UserWarning: You are trying to use a chat model. This way of initializing it is no longer supported. Instead, please use: `from langchain.chat_models import ChatOpenAI`</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      warnings.warn(</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">spotify_agent </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> planner</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">create_openapi_agent</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">spotify_api_spec</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> requests_wrapper</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> llm</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">user_query </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;make me a playlist with the first song from kind of blue. call it machine blues.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">spotify_agent</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">run</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">user_query</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div lang="python"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &gt; Entering new AgentExecutor chain...</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: api_planner</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: I need to find the right API calls to create a playlist with the first song from Kind of Blue and name it Machine Blues</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: 1. GET /search to search for the album &quot;Kind of Blue&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    2. GET /albums/{id}/tracks to get the tracks from the &quot;Kind of Blue&quot; album</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    3. GET /me to get the current user&#x27;s information</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    4. POST /users/{user_id}/playlists to create a new playlist named &quot;Machine Blues&quot; for the current user</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    5. POST /playlists/{playlist_id}/tracks to add the first song from &quot;Kind of Blue&quot; to the &quot;Machine Blues&quot; playlist</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought:I have the plan, now I need to execute the API calls.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: api_controller</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: 1. GET /search to search for the album &quot;Kind of Blue&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    2. GET /albums/{id}/tracks to get the tracks from the &quot;Kind of Blue&quot; album</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    3. GET /me to get the current user&#x27;s information</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    4. POST /users/{user_id}/playlists to create a new playlist named &quot;Machine Blues&quot; for the current user</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    5. POST /playlists/{playlist_id}/tracks to add the first song from &quot;Kind of Blue&quot; to the &quot;Machine Blues&quot; playlist</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &gt; Entering new AgentExecutor chain...</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: requests_get</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: {&quot;url&quot;: &quot;https://api.spotify.com/v1/search?q=Kind%20of%20Blue&amp;type=album&quot;, &quot;output_instructions&quot;: &quot;Extract the id of the first album in the search results&quot;}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: 1weenld61qoidwYuZ1GESA</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought:Action: requests_get</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: {&quot;url&quot;: &quot;https://api.spotify.com/v1/albums/1weenld61qoidwYuZ1GESA/tracks&quot;, &quot;output_instructions&quot;: &quot;Extract the id of the first track in the album&quot;}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: 7q3kkfAVpmcZ8g6JUThi3o</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought:Action: requests_get</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: {&quot;url&quot;: &quot;https://api.spotify.com/v1/me&quot;, &quot;output_instructions&quot;: &quot;Extract the id of the current user&quot;}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: 22rhrz4m4kvpxlsb5hezokzwi</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought:Action: requests_post</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: {&quot;url&quot;: &quot;https://api.spotify.com/v1/users/22rhrz4m4kvpxlsb5hezokzwi/playlists&quot;, &quot;data&quot;: {&quot;name&quot;: &quot;Machine Blues&quot;}, &quot;output_instructions&quot;: &quot;Extract the id of the created playlist&quot;}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: 7lzoEi44WOISnFYlrAIqyX</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought:Action: requests_post</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: {&quot;url&quot;: &quot;https://api.spotify.com/v1/playlists/7lzoEi44WOISnFYlrAIqyX/tracks&quot;, &quot;data&quot;: {&quot;uris&quot;: [&quot;spotify:track:7q3kkfAVpmcZ8g6JUThi3o&quot;]}, &quot;output_instructions&quot;: &quot;Confirm that the track was added to the playlist&quot;}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: The track was added to the playlist, confirmed by the snapshot_id: MiwxODMxNTMxZTFlNzg3ZWFlZmMxYTlmYWQyMDFiYzUwNDEwMTAwZmE1.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought:I am finished executing the plan.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Final Answer: The first song from the &quot;Kind of Blue&quot; album has been added to the &quot;Machine Blues&quot; playlist.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &gt; Finished chain.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: The first song from the &quot;Kind of Blue&quot; album has been added to the &quot;Machine Blues&quot; playlist.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought:I am finished executing the plan and have created the playlist with the first song from Kind of Blue.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Final Answer: I have created a playlist called &quot;Machine Blues&quot; with the first song from the &quot;Kind of Blue&quot; album.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &gt; Finished chain.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &#x27;I have created a playlist called &quot;Machine Blues&quot; with the first song from the &quot;Kind of Blue&quot; album.&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">user_query </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;give me a song I&#x27;d like, make it blues-ey&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">spotify_agent</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">run</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">user_query</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div lang="python"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &gt; Entering new AgentExecutor chain...</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: api_planner</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: I need to find the right API calls to get a blues song recommendation for the user</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: 1. GET /me to get the current user&#x27;s information</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    2. GET /recommendations/available-genre-seeds to retrieve a list of available genres</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    3. GET /recommendations with the seed_genre parameter set to &quot;blues&quot; to get a blues song recommendation for the user</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought:I have the plan, now I need to execute the API calls.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: api_controller</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: 1. GET /me to get the current user&#x27;s information</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    2. GET /recommendations/available-genre-seeds to retrieve a list of available genres</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    3. GET /recommendations with the seed_genre parameter set to &quot;blues&quot; to get a blues song recommendation for the user</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &gt; Entering new AgentExecutor chain...</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: requests_get</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: {&quot;url&quot;: &quot;https://api.spotify.com/v1/me&quot;, &quot;output_instructions&quot;: &quot;Extract the user&#x27;s id and username&quot;}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: ID: 22rhrz4m4kvpxlsb5hezokzwi, Username: Jeremy Welborn</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought:Action: requests_get</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: {&quot;url&quot;: &quot;https://api.spotify.com/v1/recommendations/available-genre-seeds&quot;, &quot;output_instructions&quot;: &quot;Extract the list of available genres&quot;}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: acoustic, afrobeat, alt-rock, alternative, ambient, anime, black-metal, bluegrass, blues, bossanova, brazil, breakbeat, british, cantopop, chicago-house, children, chill, classical, club, comedy, country, dance, dancehall, death-metal, deep-house, detroit-techno, disco, disney, drum-and-bass, dub, dubstep, edm, electro, electronic, emo, folk, forro, french, funk, garage, german, gospel, goth, grindcore, groove, grunge, guitar, happy, hard-rock, hardcore, hardstyle, heavy-metal, hip-hop, holidays, honky-tonk, house, idm, indian, indie, indie-pop, industrial, iranian, j-dance, j-idol, j-pop, j-rock, jazz, k-pop, kids, latin, latino, malay, mandopop, metal, metal-misc, metalcore, minimal-techno, movies, mpb, new-age, new-release, opera, pagode, party, philippines-</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought:</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Retrying langchain.llms.openai.completion_with_retry.&lt;locals&gt;._completion_with_retry in 4.0 seconds as it raised RateLimitError: That model is currently overloaded with other requests. You can retry your request, or contact us through our help center at help.openai.com if the error persists. (Please include the request ID 2167437a0072228238f3c0c5b3882764 in your message.).</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: requests_get</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: {&quot;url&quot;: &quot;https://api.spotify.com/v1/recommendations?seed_genres=blues&quot;, &quot;output_instructions&quot;: &quot;Extract the list of recommended tracks with their ids and names&quot;}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: [</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        id: &#x27;03lXHmokj9qsXspNsPoirR&#x27;,</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        name: &#x27;Get Away Jordan&#x27;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought:I am finished executing the plan.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Final Answer: The recommended blues song for user Jeremy Welborn (ID: 22rhrz4m4kvpxlsb5hezokzwi) is &quot;Get Away Jordan&quot; with the track ID: 03lXHmokj9qsXspNsPoirR.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &gt; Finished chain.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: The recommended blues song for user Jeremy Welborn (ID: 22rhrz4m4kvpxlsb5hezokzwi) is &quot;Get Away Jordan&quot; with the track ID: 03lXHmokj9qsXspNsPoirR.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought:I am finished executing the plan and have the information the user asked for.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Final Answer: The recommended blues song for you is &quot;Get Away Jordan&quot; with the track ID: 03lXHmokj9qsXspNsPoirR.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &gt; Finished chain.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &#x27;The recommended blues song for you is &quot;Get Away Jordan&quot; with the track ID: 03lXHmokj9qsXspNsPoirR.&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="try-another-api">Try another API.<a href="#try-another-api" class="hash-link" aria-label="Direct link to Try another API." title="Direct link to Try another API.">​</a></h4><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">headers </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Authorization&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:rgb(163, 21, 21)">f&quot;Bearer </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token string-interpolation interpolation">os</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token string-interpolation interpolation">getenv</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string-interpolation interpolation string" style="color:rgb(163, 21, 21)">&#x27;OPENAI_API_KEY&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token string-interpolation string" style="color:rgb(163, 21, 21)">&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">openai_requests_wrapper </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> RequestsWrapper</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">headers</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">headers</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)"># Meta!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">llm </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> OpenAI</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">model_name</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;gpt-4&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> temperature</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">0.25</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">openai_agent </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> planner</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">create_openapi_agent</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    openai_api_spec</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> openai_requests_wrapper</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> llm</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">user_query </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;generate a short piece of advice&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">openai_agent</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">run</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">user_query</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div lang="python"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &gt; Entering new AgentExecutor chain...</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: api_planner</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: I need to find the right API calls to generate a short piece of advice</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: 1. GET /engines to retrieve the list of available engines</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    2. POST /completions with the selected engine and a prompt for generating a short piece of advice</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought:I have the plan, now I need to execute the API calls.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: api_controller</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: 1. GET /engines to retrieve the list of available engines</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    2. POST /completions with the selected engine and a prompt for generating a short piece of advice</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &gt; Entering new AgentExecutor chain...</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: requests_get</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: {&quot;url&quot;: &quot;https://api.openai.com/v1/engines&quot;, &quot;output_instructions&quot;: &quot;Extract the ids of the engines&quot;}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: babbage, davinci, text-davinci-edit-001, babbage-code-search-code, text-similarity-babbage-001, code-davinci-edit-001, text-davinci-001, ada, babbage-code-search-text, babbage-similarity, whisper-1, code-search-babbage-text-001, text-curie-001, code-search-babbage-code-001, text-ada-001, text-embedding-ada-002, text-similarity-ada-001, curie-instruct-beta, ada-code-search-code, ada-similarity, text-davinci-003, code-search-ada-text-001, text-search-ada-query-001, davinci-search-document, ada-code-search-text, text-search-ada-doc-001, davinci-instruct-beta, text-similarity-curie-001, code-search-ada-code-001</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought:I will use the &quot;davinci&quot; engine to generate a short piece of advice.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: requests_post</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: {&quot;url&quot;: &quot;https://api.openai.com/v1/completions&quot;, &quot;data&quot;: {&quot;engine&quot;: &quot;davinci&quot;, &quot;prompt&quot;: &quot;Give me a short piece of advice on how to be more productive.&quot;}, &quot;output_instructions&quot;: &quot;Extract the text from the first choice&quot;}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: &quot;you must provide a model parameter&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought:!! Could not _extract_tool_and_input from &quot;I cannot finish executing the plan without knowing how to provide the model parameter correctly.&quot; in _get_next_action</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    I cannot finish executing the plan without knowing how to provide the model parameter correctly.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &gt; Finished chain.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: I need more information on how to provide the model parameter correctly in the POST request to generate a short piece of advice.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought:I need to adjust my plan to include the model parameter in the POST request.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: api_planner</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: I need to find the right API calls to generate a short piece of advice, including the model parameter in the POST request</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: 1. GET /models to retrieve the list of available models</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    2. Choose a suitable model from the list</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    3. POST /completions with the chosen model as a parameter to generate a short piece of advice</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought:I have an updated plan, now I need to execute the API calls.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: api_controller</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: 1. GET /models to retrieve the list of available models</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    2. Choose a suitable model from the list</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    3. POST /completions with the chosen model as a parameter to generate a short piece of advice</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &gt; Entering new AgentExecutor chain...</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: requests_get</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: {&quot;url&quot;: &quot;https://api.openai.com/v1/models&quot;, &quot;output_instructions&quot;: &quot;Extract the ids of the available models&quot;}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: babbage, davinci, text-davinci-edit-001, babbage-code-search-code, text-similarity-babbage-001, code-davinci-edit-001, text-davinci-edit-001, ada</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought:Action: requests_post</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: {&quot;url&quot;: &quot;https://api.openai.com/v1/completions&quot;, &quot;data&quot;: {&quot;model&quot;: &quot;davinci&quot;, &quot;prompt&quot;: &quot;Give me a short piece of advice on how to improve communication skills.&quot;}, &quot;output_instructions&quot;: &quot;Extract the text from the first choice&quot;}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: &quot;I&#x27;d like to broaden my horizon.\n\nI was trying to&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought:I cannot finish executing the plan without knowing some other information.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Final Answer: The generated text is not a piece of advice on improving communication skills. I would need to retry the API call with a different prompt or model to get a more relevant response.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &gt; Finished chain.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: The generated text is not a piece of advice on improving communication skills. I would need to retry the API call with a different prompt or model to get a more relevant response.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought:I need to adjust my plan to include a more specific prompt for generating a short piece of advice on improving communication skills.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: api_planner</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: I need to find the right API calls to generate a short piece of advice on improving communication skills, including the model parameter in the POST request</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: 1. GET /models to retrieve the list of available models</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    2. Choose a suitable model for generating text (e.g., text-davinci-002)</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    3. POST /completions with the chosen model and a prompt related to improving communication skills to generate a short piece of advice</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought:I have an updated plan, now I need to execute the API calls.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: api_controller</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: 1. GET /models to retrieve the list of available models</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    2. Choose a suitable model for generating text (e.g., text-davinci-002)</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    3. POST /completions with the chosen model and a prompt related to improving communication skills to generate a short piece of advice</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &gt; Entering new AgentExecutor chain...</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: requests_get</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: {&quot;url&quot;: &quot;https://api.openai.com/v1/models&quot;, &quot;output_instructions&quot;: &quot;Extract the names of the models&quot;}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: babbage, davinci, text-davinci-edit-001, babbage-code-search-code, text-similarity-babbage-001, code-davinci-edit-001, text-davinci-edit-001, ada</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought:Action: requests_post</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: {&quot;url&quot;: &quot;https://api.openai.com/v1/completions&quot;, &quot;data&quot;: {&quot;model&quot;: &quot;text-davinci-002&quot;, &quot;prompt&quot;: &quot;Give a short piece of advice on how to improve communication skills&quot;}, &quot;output_instructions&quot;: &quot;Extract the text from the first choice&quot;}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: &quot;Some basic advice for improving communication skills would be to make sure to listen&quot;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought:I am finished executing the plan.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Final Answer: Some basic advice for improving communication skills would be to make sure to listen.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &gt; Finished chain.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: Some basic advice for improving communication skills would be to make sure to listen.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought:I am finished executing the plan and have the information the user asked for.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Final Answer: A short piece of advice for improving communication skills is to make sure to listen.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &gt; Finished chain.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &#x27;A short piece of advice for improving communication skills is to make sure to listen.&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><p>Takes awhile to get there!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2nd-example-json-explorer-agent">2nd example: &quot;json explorer&quot; agent<a href="#2nd-example-json-explorer-agent" class="hash-link" aria-label="Direct link to 2nd example: &quot;json explorer&quot; agent" title="Direct link to 2nd example: &quot;json explorer&quot; agent">​</a></h2><p>Here&#x27;s an agent that&#x27;s not particularly practical, but neat! The agent has access to 2 toolkits. One comprises tools to interact with json: one tool to list the keys of a json object and another tool to get the value for a given key. The other toolkit comprises <code>requests</code> wrappers to send GET and POST requests. This agent consumes a lot calls to the language model, but does a surprisingly decent job.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">agents </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> create_openapi_agent</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">agents</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">agent_toolkits </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> OpenAPIToolkit</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">llms</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">openai </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> OpenAI</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">requests </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> TextRequestsWrapper</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> langchain</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">tools</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">json</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">tool </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> JsonSpec</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div style="padding-top:1.3rem;background:var(--prism-background-color);color:var(--prism-color);margin-top:calc(-1 * var(--ifm-leading) - 5px);margin-bottom:var(--ifm-leading);box-shadow:var(--ifm-global-shadow-lw);border-bottom-left-radius:var(--ifm-code-border-radius);border-bottom-right-radius:var(--ifm-code-border-radius)"><h4 style="padding-left:0.65rem;margin-bottom:0.45rem">API Reference:</h4><ul style="padding-bottom:1rem"><li><a href="https://api.python.langchain.com/en/latest/agents/langchain.agents.agent_toolkits.openapi.base.create_openapi_agent.html"><span>create_openapi_agent</span></a></li><li><a href="https://api.python.langchain.com/en/latest/agents/langchain.agents.agent_toolkits.openapi.toolkit.OpenAPIToolkit.html"><span>OpenAPIToolkit</span></a></li><li><a href="https://api.python.langchain.com/en/latest/llms/langchain.llms.openai.OpenAI.html"><span>OpenAI</span></a></li><li><a href="https://api.python.langchain.com/en/latest/utilities/langchain.utilities.requests.TextRequestsWrapper.html"><span>TextRequestsWrapper</span></a></li><li><a href="https://api.python.langchain.com/en/latest/tools/langchain.tools.json.tool.JsonSpec.html"><span>JsonSpec</span></a></li></ul></div><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">with</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(0, 112, 193)">open</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;openai_openapi.yaml&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">as</span><span class="token plain"> f</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    data </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> yaml</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">load</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">f</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> Loader</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">yaml</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">FullLoader</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">json_spec </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> JsonSpec</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">dict_</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> max_value_length</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">4000</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">openapi_toolkit </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> OpenAPIToolkit</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">from_llm</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    OpenAI</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">temperature</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> json_spec</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> openai_requests_wrapper</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> verbose</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token boolean">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">openapi_agent_executor </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> create_openapi_agent</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    llm</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">OpenAI</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">temperature</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> toolkit</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">openapi_toolkit</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> verbose</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token boolean">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">openapi_agent_executor</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">run</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Make a post request to openai /completions. The prompt should be &#x27;tell me a joke.&#x27;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div lang="python"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#F5F5F5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &gt; Entering new AgentExecutor chain...</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: json_explorer</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: What is the base url for the API?</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &gt; Entering new AgentExecutor chain...</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: json_spec_list_keys</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: data</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: [&#x27;openapi&#x27;, &#x27;info&#x27;, &#x27;servers&#x27;, &#x27;tags&#x27;, &#x27;paths&#x27;, &#x27;components&#x27;, &#x27;x-oaiMeta&#x27;]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought: I should look at the servers key to see what the base url is</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: json_spec_list_keys</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: data[&quot;servers&quot;][0]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: ValueError(&#x27;Value at path `data[&quot;servers&quot;][0]` is not a dict, get the value directly.&#x27;)</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought: I should get the value of the servers key</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: json_spec_get_value</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: data[&quot;servers&quot;][0]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: {&#x27;url&#x27;: &#x27;https://api.openai.com/v1&#x27;}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought: I now know the base url for the API</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Final Answer: The base url for the API is https://api.openai.com/v1</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &gt; Finished chain.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: The base url for the API is https://api.openai.com/v1</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought: I should find the path for the /completions endpoint.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: json_explorer</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: What is the path for the /completions endpoint?</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &gt; Entering new AgentExecutor chain...</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: json_spec_list_keys</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: data</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: [&#x27;openapi&#x27;, &#x27;info&#x27;, &#x27;servers&#x27;, &#x27;tags&#x27;, &#x27;paths&#x27;, &#x27;components&#x27;, &#x27;x-oaiMeta&#x27;]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought: I should look at the paths key to see what endpoints exist</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: json_spec_list_keys</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: data[&quot;paths&quot;]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: [&#x27;/engines&#x27;, &#x27;/engines/{engine_id}&#x27;, &#x27;/completions&#x27;, &#x27;/chat/completions&#x27;, &#x27;/edits&#x27;, &#x27;/images/generations&#x27;, &#x27;/images/edits&#x27;, &#x27;/images/variations&#x27;, &#x27;/embeddings&#x27;, &#x27;/audio/transcriptions&#x27;, &#x27;/audio/translations&#x27;, &#x27;/engines/{engine_id}/search&#x27;, &#x27;/files&#x27;, &#x27;/files/{file_id}&#x27;, &#x27;/files/{file_id}/content&#x27;, &#x27;/answers&#x27;, &#x27;/classifications&#x27;, &#x27;/fine-tunes&#x27;, &#x27;/fine-tunes/{fine_tune_id}&#x27;, &#x27;/fine-tunes/{fine_tune_id}/cancel&#x27;, &#x27;/fine-tunes/{fine_tune_id}/events&#x27;, &#x27;/models&#x27;, &#x27;/models/{model}&#x27;, &#x27;/moderations&#x27;]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought: I now know the path for the /completions endpoint</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Final Answer: The path for the /completions endpoint is data[&quot;paths&quot;][2]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &gt; Finished chain.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: The path for the /completions endpoint is data[&quot;paths&quot;][2]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought: I should find the required parameters for the POST request.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: json_explorer</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: What are the required parameters for a POST request to the /completions endpoint?</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &gt; Entering new AgentExecutor chain...</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: json_spec_list_keys</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: data</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: [&#x27;openapi&#x27;, &#x27;info&#x27;, &#x27;servers&#x27;, &#x27;tags&#x27;, &#x27;paths&#x27;, &#x27;components&#x27;, &#x27;x-oaiMeta&#x27;]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought: I should look at the paths key to see what endpoints exist</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: json_spec_list_keys</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: data[&quot;paths&quot;]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: [&#x27;/engines&#x27;, &#x27;/engines/{engine_id}&#x27;, &#x27;/completions&#x27;, &#x27;/chat/completions&#x27;, &#x27;/edits&#x27;, &#x27;/images/generations&#x27;, &#x27;/images/edits&#x27;, &#x27;/images/variations&#x27;, &#x27;/embeddings&#x27;, &#x27;/audio/transcriptions&#x27;, &#x27;/audio/translations&#x27;, &#x27;/engines/{engine_id}/search&#x27;, &#x27;/files&#x27;, &#x27;/files/{file_id}&#x27;, &#x27;/files/{file_id}/content&#x27;, &#x27;/answers&#x27;, &#x27;/classifications&#x27;, &#x27;/fine-tunes&#x27;, &#x27;/fine-tunes/{fine_tune_id}&#x27;, &#x27;/fine-tunes/{fine_tune_id}/cancel&#x27;, &#x27;/fine-tunes/{fine_tune_id}/events&#x27;, &#x27;/models&#x27;, &#x27;/models/{model}&#x27;, &#x27;/moderations&#x27;]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought: I should look at the /completions endpoint to see what parameters are required</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: json_spec_list_keys</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: data[&quot;paths&quot;][&quot;/completions&quot;]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: [&#x27;post&#x27;]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought: I should look at the post key to see what parameters are required</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: json_spec_list_keys</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: data[&quot;paths&quot;][&quot;/completions&quot;][&quot;post&quot;]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: [&#x27;operationId&#x27;, &#x27;tags&#x27;, &#x27;summary&#x27;, &#x27;requestBody&#x27;, &#x27;responses&#x27;, &#x27;x-oaiMeta&#x27;]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought: I should look at the requestBody key to see what parameters are required</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: json_spec_list_keys</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: data[&quot;paths&quot;][&quot;/completions&quot;][&quot;post&quot;][&quot;requestBody&quot;]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: [&#x27;required&#x27;, &#x27;content&#x27;]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought: I should look at the content key to see what parameters are required</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: json_spec_list_keys</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: data[&quot;paths&quot;][&quot;/completions&quot;][&quot;post&quot;][&quot;requestBody&quot;][&quot;content&quot;]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: [&#x27;application/json&#x27;]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought: I should look at the application/json key to see what parameters are required</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: json_spec_list_keys</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: data[&quot;paths&quot;][&quot;/completions&quot;][&quot;post&quot;][&quot;requestBody&quot;][&quot;content&quot;][&quot;application/json&quot;]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: [&#x27;schema&#x27;]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought: I should look at the schema key to see what parameters are required</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: json_spec_list_keys</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: data[&quot;paths&quot;][&quot;/completions&quot;][&quot;post&quot;][&quot;requestBody&quot;][&quot;content&quot;][&quot;application/json&quot;][&quot;schema&quot;]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: [&#x27;$ref&#x27;]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought: I should look at the $ref key to see what parameters are required</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: json_spec_list_keys</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: data[&quot;paths&quot;][&quot;/completions&quot;][&quot;post&quot;][&quot;requestBody&quot;][&quot;content&quot;][&quot;application/json&quot;][&quot;schema&quot;][&quot;$ref&quot;]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: ValueError(&#x27;Value at path `data[&quot;paths&quot;][&quot;/completions&quot;][&quot;post&quot;][&quot;requestBody&quot;][&quot;content&quot;][&quot;application/json&quot;][&quot;schema&quot;][&quot;$ref&quot;]` is not a dict, get the value directly.&#x27;)</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought: I should look at the $ref key to get the value directly</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: json_spec_get_value</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: data[&quot;paths&quot;][&quot;/completions&quot;][&quot;post&quot;][&quot;requestBody&quot;][&quot;content&quot;][&quot;application/json&quot;][&quot;schema&quot;][&quot;$ref&quot;]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: #/components/schemas/CreateCompletionRequest</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought: I should look at the CreateCompletionRequest schema to see what parameters are required</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: json_spec_list_keys</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: data[&quot;components&quot;][&quot;schemas&quot;][&quot;CreateCompletionRequest&quot;]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: [&#x27;type&#x27;, &#x27;properties&#x27;, &#x27;required&#x27;]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought: I should look at the required key to see what parameters are required</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: json_spec_get_value</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: data[&quot;components&quot;][&quot;schemas&quot;][&quot;CreateCompletionRequest&quot;][&quot;required&quot;]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: [&#x27;model&#x27;]</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought: I now know the final answer</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Final Answer: The required parameters for a POST request to the /completions endpoint are &#x27;model&#x27;.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &gt; Finished chain.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: The required parameters for a POST request to the /completions endpoint are &#x27;model&#x27;.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought: I now know the parameters needed to make the request.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action: requests_post</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Action Input: { &quot;url&quot;: &quot;https://api.openai.com/v1/completions&quot;, &quot;data&quot;: { &quot;model&quot;: &quot;davinci&quot;, &quot;prompt&quot;: &quot;tell me a joke&quot; } }</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Observation: {&quot;id&quot;:&quot;cmpl-70Ivzip3dazrIXU8DSVJGzFJj2rdv&quot;,&quot;object&quot;:&quot;text_completion&quot;,&quot;created&quot;:1680307139,&quot;model&quot;:&quot;davinci&quot;,&quot;choices&quot;:[{&quot;text&quot;:&quot; with mummy not there”\n\nYou dig deep and come up with,&quot;,&quot;index&quot;:0,&quot;logprobs&quot;:null,&quot;finish_reason&quot;:&quot;length&quot;}],&quot;usage&quot;:{&quot;prompt_tokens&quot;:4,&quot;completion_tokens&quot;:16,&quot;total_tokens&quot;:20}}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Thought: I now know the final answer.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Final Answer: The response of the POST request is {&quot;id&quot;:&quot;cmpl-70Ivzip3dazrIXU8DSVJGzFJj2rdv&quot;,&quot;object&quot;:&quot;text_completion&quot;,&quot;created&quot;:1680307139,&quot;model&quot;:&quot;davinci&quot;,&quot;choices&quot;:[{&quot;text&quot;:&quot; with mummy not there”\n\nYou dig deep and come up with,&quot;,&quot;index&quot;:0,&quot;logprobs&quot;:null,&quot;finish_reason&quot;:&quot;length&quot;}],&quot;usage&quot;:{&quot;prompt_tokens&quot;:4,&quot;completion_tokens&quot;:16,&quot;total_tokens&quot;:20}}</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &gt; Finished chain.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &#x27;The response of the POST request is {&quot;id&quot;:&quot;cmpl-70Ivzip3dazrIXU8DSVJGzFJj2rdv&quot;,&quot;object&quot;:&quot;text_completion&quot;,&quot;created&quot;:1680307139,&quot;model&quot;:&quot;davinci&quot;,&quot;choices&quot;:[{&quot;text&quot;:&quot; with mummy not there”\\n\\nYou dig deep and come up with,&quot;,&quot;index&quot;:0,&quot;logprobs&quot;:null,&quot;finish_reason&quot;:&quot;length&quot;}],&quot;usage&quot;:{&quot;prompt_tokens&quot;:4,&quot;completion_tokens&quot;:16,&quot;total_tokens&quot;:20}}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/langchain/docs/integrations/toolkits/office365"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Office365</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/langchain/docs/integrations/toolkits/openapi_nla"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Natural Language APIs</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1st-example-hierarchical-planning-agent" class="table-of-contents__link toc-highlight">1st example: hierarchical planning agent</a><ul><li><a href="#to-start-lets-collect-some-openapi-specs" class="table-of-contents__link toc-highlight">To start, let&#39;s collect some OpenAPI specs.</a></li><li><a href="#how-big-is-this-spec" class="table-of-contents__link toc-highlight">How big is this spec?</a></li><li><a href="#lets-see-some-examples" class="table-of-contents__link toc-highlight">Let&#39;s see some examples!</a></li></ul></li><li><a href="#2nd-example-json-explorer-agent" class="table-of-contents__link toc-highlight">2nd example: &quot;json explorer&quot; agent</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/cU2adEyC7w" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/LangChainAI" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">GitHub</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/hwchase17/langchain" target="_blank" rel="noopener noreferrer" class="footer__link-item">Python<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/hwchase17/langchainjs" target="_blank" rel="noopener noreferrer" class="footer__link-item">JS/TS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://langchain.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Homepage<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://blog.langchain.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 LangChain, Inc.</div></div></div></footer></div>
<script src="/langchain/assets/js/runtime~main.a20b23d6.js"></script>
<script src="/langchain/assets/js/main.af9852a9.js"></script>
</body>
</html>